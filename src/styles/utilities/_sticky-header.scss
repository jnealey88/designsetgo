/**
 * Sticky Header Utility Styles
 *
 * Provides comprehensive sticky header support for WordPress template parts.
 * Works in conjunction with WordPress's position:sticky support.
 *
 * @package DesignSetGo
 * @since 1.0.0
 */

/**
 * Core Sticky Header Support
 * Only applies when enabled globally (body class) OR per-block (template part class)
 * Targets semantic headers or explicitly enabled template parts
 * Note: Excludes footer elements to prevent unintended stickiness
 */
body:not(.block-editor-page).dsgo-sticky-header-enabled .wp-block-template-part:not(footer):first-of-type,
body:not(.block-editor-page).dsgo-sticky-header-enabled header.wp-block-template-part,
body:not(.block-editor-page) .wp-block-template-part.dsgo-sticky-header-enabled {
	position: sticky;
	top: 0;
	z-index: var(--dsgo-sticky-header-z-index, 100);
	transition: all var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out;
}

/**
 * Admin Bar Offset
 * Account for WordPress admin bar when user is logged in
 */
/* stylelint-disable selector-class-pattern */
body:not(.block-editor-page).admin-bar.dsgo-sticky-header-enabled .wp-block-template-part:not(footer):first-of-type,
body:not(.block-editor-page).admin-bar.dsgo-sticky-header-enabled header.wp-block-template-part,
body:not(.block-editor-page).admin-bar .wp-block-template-part.dsgo-sticky-header-enabled {
	top: 32px; /* WordPress admin bar height on desktop */
}

@media screen and (max-width: 782px) {

	body:not(.block-editor-page).admin-bar.dsgo-sticky-header-enabled .wp-block-template-part:not(footer):first-of-type,
	body:not(.block-editor-page).admin-bar.dsgo-sticky-header-enabled header.wp-block-template-part,
	body:not(.block-editor-page).admin-bar .wp-block-template-part.dsgo-sticky-header-enabled {
		top: 46px; /* WordPress admin bar height on mobile */
	}
}
/* stylelint-enable selector-class-pattern */

/* Remove sticky from inner block to avoid conflicts */
.wp-block-template-part .is-position-sticky {
	position: relative;
}

/**
 * Shadow on Scroll
 * Adds depth to the sticky header when scrolling
 */
.dsgo-sticky-shadow-small.wp-block-template-part.dsgo-scrolled {
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
}

.dsgo-sticky-shadow-medium.wp-block-template-part.dsgo-scrolled {
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.dsgo-sticky-shadow-large.wp-block-template-part.dsgo-scrolled {
	box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
}

/**
 * Shrink on Scroll
 * Disabled - too complex to implement universally across different layouts
 */
.dsgo-sticky-shrink.wp-block-template-part {

	/* Feature disabled - classes preserved for backwards compatibility */
}

/**
 * Hide on Scroll Down
 * Auto-hides header when scrolling down, shows when scrolling up
 */
.dsgo-sticky-hide-on-scroll-down.wp-block-template-part {
	transition: transform var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out;
}

.dsgo-sticky-hide-on-scroll-down.wp-block-template-part.dsgo-scroll-down {
	transform: translateY(-100%);
}

.dsgo-sticky-hide-on-scroll-down.wp-block-template-part.dsgo-scroll-up {
	transform: translateY(0);
}

/**
 * Background on Scroll
 * Changes/adds background color when scrolling
 */
.dsgo-sticky-bg-on-scroll.wp-block-template-part {
	transition: background-color var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out,
		color var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out;
}

.dsgo-sticky-bg-on-scroll.wp-block-template-part.dsgo-scrolled {
	background-color: var(--dsgo-sticky-scroll-bg-color, rgba(255, 255, 255, 0.95));
	color: var(--dsgo-sticky-scroll-text-color, inherit);

	/* Apply text color to navigation elements only â€” excludes buttons with user-set colors */
	.wp-block-navigation-item__content,
	.wp-block-navigation-item__label,
	.wp-block-navigation__submenu-icon,
	.wp-block-site-title a,
	.wp-block-site-title a:hover,
	.wp-block-site-title a:focus {
		color: var(--dsgo-sticky-scroll-text-color, inherit);
		transition: color var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out;
	}

	/* Navigation SVG icons (hamburger, submenu arrows) */
	.wp-block-navigation__submenu-icon svg,
	.wp-block-navigation__responsive-container-open svg {
		fill: var(--dsgo-sticky-scroll-text-color, currentColor);
		transition: fill var(--dsgo-sticky-header-transition-speed, 300ms) ease-in-out;
	}
}

/**
 * Mobile Responsive Behavior
 * Disable sticky on mobile if configured
 */
@media (max-width: 767px) {

	.dsgo-sticky-mobile-disabled.wp-block-template-part {
		position: relative !important;
	}
}

/**
 * Accessibility: Respect prefers-reduced-motion
 */
@media (prefers-reduced-motion: reduce) {

	.wp-block-template-part,
	.dsgo-sticky-shrink.wp-block-template-part,
	.dsgo-sticky-hide-on-scroll-down.wp-block-template-part,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part .wp-block-navigation-item__content,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part .wp-block-navigation-item__label,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part .wp-block-navigation__submenu-icon,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part .wp-block-site-title a,
	.dsgo-sticky-bg-on-scroll.wp-block-template-part svg {
		transition: none !important;
	}
}

/**
 * Dark Mode Support
 */
@media (prefers-color-scheme: dark) {

	.dsgo-sticky-shadow-small.wp-block-template-part.dsgo-scrolled {
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
	}

	.dsgo-sticky-shadow-medium.wp-block-template-part.dsgo-scrolled {
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
	}

	.dsgo-sticky-shadow-large.wp-block-template-part.dsgo-scrolled {
		box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5);
	}

	.dsgo-sticky-bg-on-scroll.wp-block-template-part.dsgo-scrolled {
		background-color: var(--dsgo-sticky-scroll-bg-color, rgba(0, 0, 0, 0.95));
		color: var(--dsgo-sticky-scroll-text-color, rgba(255, 255, 255, 0.95));

		.wp-block-navigation-item__content,
		.wp-block-navigation-item__label,
		.wp-block-navigation__submenu-icon,
		.wp-block-site-title a,
		.wp-block-site-title a:hover,
		.wp-block-site-title a:focus {
			color: var(--dsgo-sticky-scroll-text-color, rgba(255, 255, 255, 0.95));
		}

		.wp-block-navigation__submenu-icon svg,
		.wp-block-navigation__responsive-container-open svg {
			fill: var(--dsgo-sticky-scroll-text-color, rgba(255, 255, 255, 0.95));
		}
	}
}

/**
 * Print Styles
 * Remove sticky behavior for printing
 */
@media print {

	.wp-block-template-part {
		position: relative !important;
		box-shadow: none !important;
	}
}
