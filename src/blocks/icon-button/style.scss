/**
 * Icon Button Block - Frontend Styles
 *
 * @since 1.0.0
 */

.dsg-icon-button {
	// Block wrapper styles applied via inline styles
	// (display: inline-block or block depending on width setting)

	&__wrapper {
		// Layout styles applied via inline styles (display, gap, flex-direction, width)
		padding: 12px 24px;
		border-radius: 4px;
		font-weight: 500;
		text-decoration: none !important;
		transition: all 0.2s ease;
		cursor: pointer;
		border: none;
		font-family: inherit;
		font-size: inherit;
		line-height: 1.5;

		// Default colors (can be overridden by block color controls)
		background-color: var(--wp--preset--color--primary, #2563eb);
		color: var(--wp--preset--color--base, #fff);

		&:hover {
			opacity: 0.9;
			transform: translateY(-1px);
			text-decoration: none !important;
			border: none !important; // Prevent theme/WordPress from adding borders
		}

		&:active {
			transform: translateY(0);
			text-decoration: none !important;
			border: none !important; // Prevent theme/WordPress from adding borders
		}

		&:focus {
			outline: 2px solid var(--wp--preset--color--primary, #2563eb);
			outline-offset: 2px;
			text-decoration: none !important;
			border: none !important; // Prevent theme/WordPress from adding borders
		}

		// When it's a div (no link), remove cursor pointer
		&:not(a) {
			cursor: default;
		}
	}

	&__icon {
		// Size and layout styles applied via inline styles
		svg {
			width: 100%;
			height: 100%;
			display: block;
			fill: currentcolor;
		}
	}

	&__text {
		// Text content
		flex: 1 0 auto;
		white-space: nowrap;
	}

	// Ensure proper color inheritance from WordPress color controls
	// Use background-color instead of background shorthand to avoid conflicts with hover
	&[style*="background-color"]:not([style*="background-image"]) .dsg-icon-button__wrapper {
		background-color: inherit !important;
	}

	// For background images, inherit full background
	&[style*="background-image"] .dsg-icon-button__wrapper {
		background: inherit !important;
	}

	// Transfer inline text color to wrapper
	// Note: We check for " color:" or ";color:" to avoid matching "background-color"
	&[style*=" color:"] .dsg-icon-button__wrapper,
	&[style*=";color:"] .dsg-icon-button__wrapper {
		color: inherit !important;
	}

	// Handle gradient backgrounds
	&.has-background[style*="background"] .dsg-icon-button__wrapper {
		background: inherit !important;
	}
}

// CRITICAL: Must duplicate from icons pattern for container parent hover
// Parent container hover: apply button background when parent is hovered
// Uses CSS variable set by parent container (Flex, Grid, Stack)
// CRITICAL: Check if PARENT container has the variable, not the button itself
// CRITICAL: Use __inner wrapper to avoid triggering on outer padding areas
// CRITICAL: Use direct child selector (>) to only affect direct children
.dsg-flex[style*="--dsg-parent-hover-button-bg"]:hover .dsg-flex__inner > .dsg-icon-button .dsg-icon-button__wrapper,
.dsg-grid[style*="--dsg-parent-hover-button-bg"]:hover .dsg-grid__inner > .dsg-icon-button .dsg-icon-button__wrapper,
.dsg-stack[style*="--dsg-parent-hover-button-bg"]:hover .dsg-stack__inner > .dsg-icon-button .dsg-icon-button__wrapper {
	background-color: var(--dsg-parent-hover-button-bg) !important;
	transition: background-color 0.3s ease;
}
