/**
 * Icon Button Block - Editor Styles
 *
 * @since 1.0.0
 */

// Import frontend styles
@use './style.scss' as *;

.dsgo-icon-button {
	// Editor-specific styles

	// Width auto: Ensure the button wrapper stays fit-content in the editor
	// WordPress editor may try to force blocks to full width by default
	&--width-auto {
		.dsgo-icon-button__wrapper {
			width: fit-content !important;
			max-width: fit-content !important;
		}
	}

	.dsgo-icon-button__wrapper {
		// Make wrapper visually appear as a button in the editor
		position: relative;

		// Add editor-only indicator for non-link buttons
		&:not(a)::after {
			content: 'ðŸ”—';
			position: absolute;
			top: -8px;
			right: -8px;
			font-size: 12px;
			opacity: 0.3;
			display: none;
		}
	}

	// Show link indicator when button is selected and has no URL
	&.is-selected .dsgo-icon-button__wrapper:not(a)::after {
		display: block;
	}

	// RichText input styling
	.dsgo-icon-button__text {
		// Ensure text input doesn't have unwanted margins
		margin: 0;
		padding: 0;

		&[data-rich-text-placeholder]::before {
			opacity: 0.6;
		}
	}
}

// CRITICAL: Must duplicate from style.scss for editor/frontend parity
// Parent container hover: apply button background when parent is hovered
// Uses CSS variable set by parent container (Flex, Grid, Stack)
// CRITICAL: Check if PARENT container has the variable, not the button itself
// CRITICAL: Use __inner wrapper to avoid triggering on outer padding areas
// CRITICAL: Use direct child selector (>) to only affect direct children
.dsgo-flex[style*="--dsgo-parent-hover-button-bg"]:hover .dsgo-flex__inner > .dsgo-icon-button .dsgo-icon-button__wrapper,
.dsgo-grid[style*="--dsgo-parent-hover-button-bg"]:hover .dsgo-grid__inner > .dsgo-icon-button .dsgo-icon-button__wrapper,
.dsgo-stack[style*="--dsgo-parent-hover-button-bg"]:hover .dsgo-stack__inner > .dsgo-icon-button .dsgo-icon-button__wrapper {
	background-color: var(--dsgo-parent-hover-button-bg) !important;
	transition: background-color 0.3s ease;
}
