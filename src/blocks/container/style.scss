/**
 * Container Block - Frontend Styles
 *
 * Layout Engine Approach (following PLAN.md):
 * - Aggressive CSS that takes full control
 * - No reliance on WordPress layout system
 * - JavaScript applies layouts, CSS ensures they work
 */

.dsg-container {
	position: relative;
	width: 100%;
	box-sizing: border-box;

	// AGGRESSIVE FULL-WIDTH
	// This is how Elementor/Bricks do it - no fighting with WordPress variables
	&.alignfull {
		width: 100vw !important;
		max-width: none !important;
		margin-left: calc(50% - 50vw) !important;
		margin-right: calc(50% - 50vw) !important;
	}

	// Wide alignment
	&.alignwide {
		max-width: 1200px !important;
		margin-left: auto !important;
		margin-right: auto !important;
	}

	// Video background
	&.has-video-background {
		overflow: hidden;

		.dsg-video-background {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
			z-index: 0;
			pointer-events: none;

			video {
				position: absolute;
				top: 50%;
				left: 50%;
				min-width: 100%;
				min-height: 100%;
				width: auto;
				height: auto;
				transform: translate(-50%, -50%);
				object-fit: cover;
			}
		}
	}

	// Overlay - ensure container constrains overlay boundaries
	&.has-dsg-overlay {
		overflow: hidden;

		.dsg-overlay {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.5);
			z-index: 1;
			pointer-events: none;
		}
	}

	// Responsive visibility
	@media (min-width: 1024px) {
		&.dsg-hide-desktop {
			display: none !important;
		}
	}

	@media (min-width: 768px) and (max-width: 1023px) {
		&.dsg-hide-tablet {
			display: none !important;
		}
	}

	@media (max-width: 767px) {
		&.dsg-hide-mobile {
			display: none !important;
		}
	}

	// Clickable container
	&.is-clickable {
		cursor: pointer;
		transition: opacity 0.2s ease;

		&:hover {
			opacity: 0.9;
		}
	}
}

/**
 * Inner container - Responsive grid layout
 * Uses CSS custom properties set via inline styles for responsive columns
 */
.dsg-container__inner {
	width: 100%;
	box-sizing: border-box;

	// Reset any WordPress layout styles that might interfere
	> * {
		max-width: none !important;
	}

	// Ensure grid/flex children behave properly
	&[style*="grid"] > *,
	&[style*="flex"] > * {
		min-width: 0; // Prevent flex/grid blowout
		box-sizing: border-box;
	}

	// Responsive grid columns using CSS custom properties
	// Desktop: uses --dsg-grid-cols-desktop (default, already in inline styles)
	// Tablet: switches to --dsg-grid-cols-tablet
	// Mobile: switches to --dsg-grid-cols-mobile

	@media (max-width: 767px) {
		// Mobile: 1 column by default
		&[style*="display: grid"],
		&[style*="display:grid"] {
			grid-template-columns: repeat(var(--dsg-grid-cols-mobile, 1), 1fr) !important;
		}
	}

	@media (min-width: 768px) and (max-width: 1023px) {
		// Tablet: 2 columns by default
		&[style*="display: grid"],
		&[style*="display:grid"] {
			grid-template-columns: repeat(var(--dsg-grid-cols-tablet, 2), 1fr) !important;
		}
	}

	@media (min-width: 1024px) {
		// Desktop: uses --dsg-grid-cols-desktop (already applied in inline styles)
		// No override needed, inline style handles this
	}
}
