/**
 * Pill Block Frontend Styles
 */

.dsg-pill {
	// Container display - block so pills stack vertically
	// Inner content is inline-block for tight wrapping
	display: block;

	// Remove background/color styles from wrapper when using WordPress color controls
	// These should apply to the inner span, not the outer div
	&[class*="has-"][class*="-background-color"],
	&[class*="has-"][class*="-color"]:not([class*="-background-color"]),
	&.has-background,
	&.has-text-color {
		background-color: transparent !important;
		background: transparent !important;
		color: inherit !important;
	}
}

.dsg-pill__content {
	// Inline-block so background wraps tightly around text
	display: inline-block;

	// Pill shape (fully rounded corners) - fallback if not set via supports
	border-radius: 999px;

	// Smooth transitions for interactive states
	transition: all 0.2s ease-in-out;

	// Ensure text doesn't break awkwardly
	white-space: nowrap;

	// Default styles - always applied as base, overridden by WordPress color transfers
	padding: 0.5em 1em;
	background-color: var(--wp--preset--color--primary, #2563eb);
	color: var(--wp--preset--color--base, #fff);
	font-size: 0.875em;
	font-weight: 500;
	line-height: 1.5;
}

// Transfer WordPress color classes from wrapper to inner span
.dsg-pill {
	// Background colors
	@each $color in (primary, secondary, tertiary, contrast, base, base-2, accent, accent-2, accent-3, accent-4, accent-5) {
		&.has-#{$color}-background-color .dsg-pill__content {
			background-color: var(--wp--preset--color--#{$color}) !important;
		}
	}

	// Text colors
	@each $color in (primary, secondary, tertiary, contrast, base, base-2, accent, accent-2, accent-3, accent-4, accent-5) {
		&.has-#{$color}-color .dsg-pill__content {
			color: var(--wp--preset--color--#{$color}) !important;
		}
	}

	// Gradient backgrounds
	&.has-background[style*="background"] .dsg-pill__content {
		background: inherit !important;
	}

	// Custom colors (inline styles)
	&[style*="background-color"] .dsg-pill__content {
		background-color: inherit !important;
	}

	// Transfer inline text color to inner content
	// Note: We check for " color:" with space to avoid matching "background-color"
	&[style*=" color:"] .dsg-pill__content,
	&[style*=";color:"] .dsg-pill__content {
		color: inherit !important;
	}
}

// Alignment support - use flexbox to position the inner inline-block content
// Important is needed to override Stack block's width: auto !important
// Higher specificity selector to override Stack container rules
.dsg-pill.alignleft,
[class*="wp-container"] > .dsg-pill.alignleft {
	display: flex !important;
	justify-content: flex-start;
	width: fit-content !important;
	margin-right: auto !important;
	margin-left: 0 !important;
}

.dsg-pill.aligncenter,
[class*="wp-container"] > .dsg-pill.aligncenter {
	display: flex !important;
	justify-content: center;
	width: fit-content !important;
	margin-left: auto !important;
	margin-right: auto !important;
}

.dsg-pill.alignright,
[class*="wp-container"] > .dsg-pill.alignright {
	display: flex !important;
	justify-content: flex-end;
	width: fit-content !important;
	margin-left: auto !important;
	margin-right: 0 !important;
}
