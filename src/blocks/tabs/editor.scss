/**
 * Tabs Block - Editor Styles
 */

// Ensure WordPress block wrapper doesn't cause overflow
.wp-block-designsetgo-tabs {
	max-width: 100%;
	box-sizing: border-box;

	// Override WordPress alignment negative margins
	&.alignfull,
	&.alignwide {
		margin-left: 0 !important;
		margin-right: 0 !important;
	}
}

.dsgo-tabs {
	padding: 0; // Default to no padding
	width: 100%; // CRITICAL: Must be duplicated from style.scss for editor/frontend parity
	max-width: 100%; // Prevent overflow beyond parent
	min-width: 0; // Allow shrinking in flex containers
	box-sizing: border-box; // Include padding/border in width calculation
	overflow: hidden; // Prevent child elements from overflowing
	margin-left: 0 !important; // Prevent WordPress negative margins
	margin-right: 0 !important; // Prevent WordPress negative margins

	// Tab Navigation - Clean, simple styling
	.dsgo-tabs__nav {
		display: flex;
		gap: var(--dsgo-tabs-gap, 8px);
		margin-bottom: var(--wp--preset--spacing--40, 1.5rem);
		padding: 0;
		overflow-x: auto;
		-webkit-overflow-scrolling: touch;
	}

	// Optional Nav Border
	&.dsgo-tabs--show-nav-border .dsgo-tabs__nav {
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);
		padding-bottom: 0.5rem;
	}

	.dsgo-tabs__tab {
		// Reset default button styles
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		background: var(--dsgo-tab-bg, transparent);
		border: none;
		padding: 0.75rem 1.25rem;
		margin: 0;
		font-family: inherit;
		font-size: inherit;
		color: var(--dsgo-tab-color, inherit);
		cursor: pointer;
		white-space: nowrap;

		// Ensure clickable in editor
		pointer-events: auto;
		position: relative;
		font-weight: 500;
		transition: all 0.2s ease;

		// Subtle focus indicator for keyboard navigation (WCAG 2.1)
		&:focus-visible {
			outline: 2px solid var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			outline-offset: -2px;
			border-radius: 2px;
		}

		// Subtle hover effect
		&:hover:not(.is-active) {
			color: var(--dsgo-tab-color-hover, var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb)));
			background: var(--dsgo-tab-bg-hover, transparent);
		}

		// Active state - apply custom colors
		&.is-active {
			background: var(--dsgo-tab-bg-active, transparent);
			color: var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			font-weight: 600;
		}

		// Inline-editable tab title (RichText) â€” cursor only on text, not icons/padding
		&.is-active .dsgo-tabs__tab-title {
			cursor: text;

			[contenteditable] {
				outline: none;
				cursor: text;
			}

			&:focus-within {
				outline: 1px dashed var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
				outline-offset: 2px;
				border-radius: 2px;
			}
		}
	}

	.dsgo-tabs__tab-icon {
		display: inline-flex;
		align-items: center;
		color: currentcolor;

		svg {
			fill: currentcolor;
			color: currentcolor;
		}
	}

	.dsgo-tabs__tab-icon-top {
		display: flex;
		flex-direction: column;
		align-items: center;
		margin-bottom: 0.25rem;
		color: currentcolor;

		svg {
			fill: currentcolor;
			color: currentcolor;
		}
	}

	// Panels container - no typography overrides
	.dsgo-tabs__panels {
		position: relative;
		width: 100%; // CRITICAL: Must be duplicated from style.scss for editor/frontend parity
		max-width: 100%; // Prevent overflow beyond parent
		min-width: 0; // Allow shrinking in flex containers
		box-sizing: border-box; // Include padding/border in width calculation
	}

	/**
	 * Individual Tab Panel (editor)
	 */
	.dsgo-tab {
		background: var(--dsgo-tab-content-bg, transparent);
		width: 100%;
		max-width: 100%;
		box-sizing: border-box;
	}

	/**
	 * Tab Content Wrapper
	 * No additional styles needed - padding/background applied to .dsgo-tab
	 */

	/**
	 * Orientation: Horizontal (Default)
	 */
	&.dsgo-tabs--horizontal {

		.dsgo-tabs__nav {
			flex-direction: row;
			flex-wrap: wrap;
		}

		// Alignment options
		&.dsgo-tabs--align-left .dsgo-tabs__nav {
			justify-content: flex-start;
		}

		&.dsgo-tabs--align-center .dsgo-tabs__nav {
			justify-content: center;
		}

		&.dsgo-tabs--align-right .dsgo-tabs__nav {
			justify-content: flex-end;
		}

		&.dsgo-tabs--align-justified .dsgo-tabs__nav {

			.dsgo-tabs__tab {
				flex: 1;
				justify-content: center;
			}
		}
	}

	/**
	 * Orientation: Vertical
	 */
	&.dsgo-tabs--vertical {
		display: flex;
		gap: var(--wp--preset--spacing--40, 1.5rem);

		.dsgo-tabs__nav {
			flex-direction: column;
			margin-bottom: 0;
			padding-right: var(--wp--preset--spacing--40, 1.5rem);
			min-width: 200px;
			overflow: visible; // Remove horizontal scrollbar for vertical tabs
		}

		.dsgo-tabs__panels {
			flex: 1;
		}

		.dsgo-tabs__tab {
			justify-content: flex-start;
			margin-bottom: 0;
			margin-right: calc(var(--wp--preset--spacing--40, 1.5rem) * -1);
			padding-right: var(--wp--preset--spacing--40, 1.5rem);
		}
	}

	/**
	 * Vertical + Default: Use border-bottom (not border-right)
	 */
	&.dsgo-tabs--vertical.dsgo-tabs--default {

		.dsgo-tabs__tab {
			border-bottom: 3px solid transparent;
			margin-bottom: -2px;

			&.is-active {
				border-bottom-color: var(--wp--preset--color--accent-2, #2563eb);
			}
		}
	}

	/**
	 * Vertical + Underline in editor
	 */
	&.dsgo-tabs--vertical.dsgo-tabs--underline {

		.dsgo-tabs__tab {
			border-bottom: 2px solid transparent;
			margin-right: 0;

			&:hover:not(.is-active) {
				color: var(--dsgo-tab-color-hover, var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb)));
				background: var(--dsgo-tab-bg-hover, transparent);
			}

			&.is-active {
				border-bottom-color: var(--dsgo-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}

	/**
	 * Tab Style: Default
	 * Simple text-only style with no borders or backgrounds
	 */
	&.dsgo-tabs--default {

		.dsgo-tabs__tab {

			&:hover:not(.is-active) {
				background: var(--dsgo-tab-bg-hover, transparent);
				color: var(--dsgo-tab-color-hover, var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb)));
			}

			&.is-active {
				background: transparent;
				color: var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}

	/**
	 * Tab Style: Pills
	 */
	&.dsgo-tabs--pills {
		// Override color variable for pills - white text on colored background
		--dsgo-tab-color-active: #fff;

		.dsgo-tabs__nav {
			border-bottom: none;
		}

		.dsgo-tabs__tab {
			border-radius: 6px;
			border-bottom: none;
			margin-bottom: 0;
			background: var(--dsgo-tab-bg, rgba(0, 0, 0, 0.05));

			&:hover:not(.is-active) {
				background: var(--dsgo-tab-bg-hover, var(--dsgo-tab-bg, rgba(0, 0, 0, 0.1)));
				color: var(--dsgo-tab-color-hover, var(--wp--preset--color--accent-2, #2563eb));
			}

			&.is-active {
				background: var(--dsgo-tab-bg-active, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsgo-tab-color-active, #fff);
			}
		}
	}

	/**
	 * Tab Style: Underline
	 */
	&.dsgo-tabs--underline {

		.dsgo-tabs__nav {
			border-bottom: 1px solid rgba(0, 0, 0, 0.1);
		}

		.dsgo-tabs__tab {
			padding-bottom: calc(var(--dsgo-tab-padding, 1rem) + 0.5rem);
			border-bottom: 2px solid transparent;
			margin-bottom: -1px; // Overlap the nav border
			background: transparent; // No background by default for underline style

			&:hover:not(.is-active) {
				background: var(--dsgo-tab-bg-hover, transparent);
				color: var(--dsgo-tab-color-hover, var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb)));
			}

			&.is-active {
				border-bottom-color: var(--dsgo-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
				background: transparent; // Keep transparent even when active
			}
		}
	}

	/**
	 * Tab Style: Minimal
	 */
	&.dsgo-tabs--minimal {

		.dsgo-tabs__nav {
			border-bottom: none;
		}

		.dsgo-tabs__tab {
			padding: 0.5rem 1rem;
			border-bottom: none;
			margin-bottom: 0;

			&:hover:not(.is-active) {
				color: var(--dsgo-tab-color-hover, var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb)));
				background: var(--dsgo-tab-bg-hover, transparent);
			}

			&.is-active {
				background: var(--dsgo-tab-bg-active, rgba(0, 0, 0, 0.03));
				color: var(--dsgo-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}
}
