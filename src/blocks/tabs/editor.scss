/**
 * Tabs Block - Editor Styles
 */

// Ensure WordPress block wrapper doesn't cause overflow
.wp-block-designsetgo-tabs {
	max-width: 100%;
	box-sizing: border-box;

	// Override WordPress alignment negative margins
	&.alignfull,
	&.alignwide {
		margin-left: 0 !important;
		margin-right: 0 !important;
	}
}

.dsg-tabs {
	padding: 0; // Default to no padding
	width: 100%; // CRITICAL: Must be duplicated from style.scss for editor/frontend parity
	max-width: 100%; // Prevent overflow beyond parent
	min-width: 0; // Allow shrinking in flex containers
	box-sizing: border-box; // Include padding/border in width calculation
	overflow: hidden; // Prevent child elements from overflowing
	margin-left: 0 !important; // Prevent WordPress negative margins
	margin-right: 0 !important; // Prevent WordPress negative margins

	// Tab Navigation - Clean, simple styling
	.dsg-tabs__nav {
		display: flex;
		gap: var(--dsg-tabs-gap, 8px);
		margin-bottom: var(--wp--preset--spacing--lg, 1.5rem);
		padding: 0;
		overflow-x: auto;
		-webkit-overflow-scrolling: touch;
	}

	// Optional Nav Border
	&.dsg-tabs--show-nav-border .dsg-tabs__nav {
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);
		padding-bottom: 0.5rem;
	}

	.dsg-tabs__tab {
		// Reset default button styles
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		background: var(--dsg-tab-bg, transparent);
		border: none;
		padding: 0.75rem 1.25rem;
		margin: 0;
		font-family: inherit;
		font-size: inherit;
		color: var(--dsg-tab-color, inherit);
		cursor: pointer;
		white-space: nowrap;

		// Ensure clickable in editor
		pointer-events: auto;
		position: relative;
		font-weight: 500;
		transition: all 0.2s ease;

		// Remove default focus outline, add custom (only for keyboard users)
		&:focus-visible {
			outline: 2px solid var(--dsg-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
			outline-offset: 2px;
		}

		// Subtle hover effect
		&:hover:not(.is-active) {
			color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
		}

		// Active state - apply custom colors
		&.is-active {
			background: var(--dsg-tab-bg-active, transparent);
			color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			font-weight: 600;
		}
	}

	// Panels container - no typography overrides
	.dsg-tabs__panels {
		position: relative;
		width: 100%; // CRITICAL: Must be duplicated from style.scss for editor/frontend parity
		max-width: 100%; // Prevent overflow beyond parent
		min-width: 0; // Allow shrinking in flex containers
		box-sizing: border-box; // Include padding/border in width calculation
	}

	/**
	 * Tab Content Wrapper
	 */
	.dsg-tab__content {
		// Let content flow naturally
	}

	/**
	 * Orientation: Horizontal (Default)
	 */
	&.dsg-tabs--horizontal {

		.dsg-tabs__nav {
			flex-direction: row;
			flex-wrap: wrap;
		}

		// Alignment options
		&.dsg-tabs--align-left .dsg-tabs__nav {
			justify-content: flex-start;
		}

		&.dsg-tabs--align-center .dsg-tabs__nav {
			justify-content: center;
		}

		&.dsg-tabs--align-right .dsg-tabs__nav {
			justify-content: flex-end;
		}

		&.dsg-tabs--align-justified .dsg-tabs__nav {

			.dsg-tabs__tab {
				flex: 1;
				justify-content: center;
			}
		}
	}

	/**
	 * Orientation: Vertical
	 */
	&.dsg-tabs--vertical {
		display: flex;
		gap: var(--wp--preset--spacing--md, 1.5rem);

		.dsg-tabs__nav {
			flex-direction: column;
			margin-bottom: 0;
			padding-right: var(--wp--preset--spacing--md, 1.5rem);
			min-width: 200px;
		}

		.dsg-tabs__panels {
			flex: 1;
		}

		.dsg-tabs__tab {
			justify-content: flex-start;
			margin-bottom: 0;
			margin-right: calc(var(--wp--preset--spacing--md, 1.5rem) * -1);
			padding-right: var(--wp--preset--spacing--md, 1.5rem);
		}
	}

	/**
	 * Vertical + Default: Use border-bottom (not border-right)
	 */
	&.dsg-tabs--vertical.dsg-tabs--default {

		.dsg-tabs__tab {
			border-bottom: 3px solid transparent;
			margin-bottom: -2px;

			&.is-active {
				border-bottom-color: var(--wp--preset--color--accent-2, #2563eb);
			}
		}
	}

	/**
	 * Vertical + Underline in editor
	 */
	&.dsg-tabs--vertical.dsg-tabs--underline {

		.dsg-tabs__tab {
			border-bottom: 2px solid transparent;
			margin-right: 0;

			&:hover:not(.is-active) {
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}

			&.is-active {
				border-bottom-color: var(--dsg-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}

	/**
	 * Tab Style: Default
	 */
	&.dsg-tabs--default {

		.dsg-tabs__tab {
			border-bottom: 3px solid transparent;
			margin-bottom: -2px;

			&:hover:not(.is-active) {
				background: transparent;
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}

			&.is-active {
				background: transparent;
				border-bottom-color: var(--dsg-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}

	/**
	 * Tab Style: Pills
	 */
	&.dsg-tabs--pills {
		// Override color variable for pills - white text on colored background
		--dsg-tab-color-active: #fff;

		.dsg-tabs__nav {
			border-bottom: none;
		}

		.dsg-tabs__tab {
			border-radius: 6px;
			border-bottom: none;
			margin-bottom: 0;
			background: rgba(0, 0, 0, 0.05);

			&:hover:not(.is-active) {
				background: rgba(0, 0, 0, 0.1);
				color: var(--wp--preset--color--accent-2, #2563eb);
			}

			&.is-active {
				background: var(--dsg-tab-bg-active, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsg-tab-color-active, #fff);
			}
		}
	}

	/**
	 * Tab Style: Underline
	 */
	&.dsg-tabs--underline {

		.dsg-tabs__nav {
			border-bottom: 1px solid rgba(0, 0, 0, 0.1);
		}

		.dsg-tabs__tab {
			padding-bottom: calc(var(--dsg-tab-padding, 1rem) + 0.5rem);
			border-bottom: 2px solid transparent;
			margin-bottom: -1px; // Overlap the nav border
			background: transparent; // No background by default for underline style

			&:hover:not(.is-active) {
				background: transparent; // Keep transparent on hover
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}

			&.is-active {
				border-bottom-color: var(--dsg-tab-border-color, var(--wp--preset--color--accent-2, #2563eb));
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
				background: transparent; // Keep transparent even when active
			}
		}
	}

	/**
	 * Tab Style: Minimal
	 */
	&.dsg-tabs--minimal {

		.dsg-tabs__nav {
			border-bottom: none;
		}

		.dsg-tabs__tab {
			padding: 0.5rem 1rem;
			border-bottom: none;
			margin-bottom: 0;

			&:hover:not(.is-active) {
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}

			&.is-active {
				background: rgba(0, 0, 0, 0.03);
				color: var(--dsg-tab-color-active, var(--wp--preset--color--accent-2, #2563eb));
			}
		}
	}
}
