/**
 * Tabs Block - Save Component
 *
 * Renders tab navigation and panels on frontend
 */

import { useBlockProps, useInnerBlocksProps } from '@wordpress/block-editor';
import { convertPresetToCSSVar } from '../../utils/convert-preset-to-css-var';

export default function Save({ attributes }) {
	const {
		uniqueId,
		orientation,
		activeTab,
		alignment,
		mobileBreakpoint,
		mobileMode,
		enableDeepLinking,
		gap,
		tabStyle,
		tabColor,
		tabBackgroundColor,
		tabContentBackgroundColor,
		activeTabColor,
		activeTabBackgroundColor,
		tabBorderColor,
		tabHoverColor,
		tabHoverBackgroundColor,
		showNavBorder,
	} = attributes;

	const blockProps = useBlockProps.save({
		className: `dsgo-tabs dsgo-tabs-${uniqueId} dsgo-tabs--${orientation} dsgo-tabs--${tabStyle} dsgo-tabs--align-${alignment}${showNavBorder ? ' dsgo-tabs--show-nav-border' : ''}`,
		'data-active-tab': activeTab,
		'data-mobile-breakpoint': mobileBreakpoint,
		'data-mobile-mode': mobileMode,
		'data-deep-linking': enableDeepLinking ? 'true' : 'false',
		style: {
			'--dsgo-tabs-gap': gap,
			...(tabColor && {
				'--dsgo-tab-color': convertPresetToCSSVar(tabColor),
			}),
			...(tabBackgroundColor && {
				'--dsgo-tab-bg': convertPresetToCSSVar(tabBackgroundColor),
			}),
			...(tabContentBackgroundColor && {
				'--dsgo-tab-content-bg': convertPresetToCSSVar(
					tabContentBackgroundColor
				),
			}),
			...(activeTabColor && {
				'--dsgo-tab-color-active':
					convertPresetToCSSVar(activeTabColor),
			}),
			...(activeTabBackgroundColor && {
				'--dsgo-tab-bg-active': convertPresetToCSSVar(
					activeTabBackgroundColor
				),
			}),
			...(tabBorderColor && {
				'--dsgo-tab-border-color':
					convertPresetToCSSVar(tabBorderColor),
			}),
			...(tabHoverColor && {
				'--dsgo-tab-color-hover': convertPresetToCSSVar(tabHoverColor),
			}),
			...(tabHoverBackgroundColor && {
				'--dsgo-tab-bg-hover': convertPresetToCSSVar(
					tabHoverBackgroundColor
				),
			}),
		},
	});

	const innerBlocksProps = useInnerBlocksProps.save({
		className: 'dsgo-tabs__panels',
	});

	return (
		<div {...blockProps}>
			{/* Tab navigation will be generated by frontend JS from innerBlocks */}
			<div className="dsgo-tabs__nav" role="tablist"></div>

			{/* Tab panels */}
			<div {...innerBlocksProps} />
		</div>
	);
}
