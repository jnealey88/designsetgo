/**
 * DSG Row Block - Editor Styles
 *
 * Editor-only styles for the DSG Row block.
 *
 * @package DesignSetGo
 */

.dsg-flex {
	// CRITICAL: Must duplicate from style.scss for editor/frontend parity
	// Row should be full-width by default (like other block-level elements)
	width: 100%;

	// CRITICAL: Must duplicate from style.scss for editor/frontend parity
	// Smooth transition for hover background color
	transition: background-color 0.3s ease;

	// CRITICAL: Must duplicate from style.scss for editor/frontend parity
	// Inner container must be full width for justify-content to work
	// When constrainWidth is enabled, inline styles will override with max-width
	.dsg-flex__inner {
		width: 100%;
	}

	// CRITICAL: When Row/Flex is nested inside another container, force full width (EDITOR)
	// WordPress applies constrained layout which can limit width
	// This ensures nested Rows take full width of their parent container
	// In editor, blocks are wrapped in [data-block] elements
	.dsg-stack__inner > &,
	.dsg-stack__inner > [data-block] &,
	.dsg-flex__inner > &,
	.dsg-flex__inner > [data-block] &,
	.dsg-grid__inner > &,
	.dsg-grid__inner > [data-block] & {
		width: 100% !important;

		.dsg-flex__inner {
			max-width: none !important;
			margin-left: 0 !important;
			margin-right: 0 !important;
		}
	}

	// CRITICAL: Must duplicate from style.scss for editor/frontend parity
	// Fix flex children behavior
	// With two-div structure, flex children are inside .dsg-flex__inner
	.dsg-flex__inner > * {
		// Disable float - WordPress core CSS applies float: right/left for alignment classes
		// This breaks flex layout, so we override it
		float: none !important;

		// Remove auto margins - WordPress adds margin-left/right: auto when contentSize is set
		// This breaks justify-content alignment
		margin-left: 0 !important;
		margin-right: 0 !important;

		// Remove margin-block-start - WordPress adds this but we want to use gap instead
		// This makes spacing behave like the core Row block
		margin-block-start: 0 !important;

		// CRITICAL: Support WordPress width controls (fit/grow/fixed)
		// Allow flex-basis, flex-grow, flex-shrink from WordPress layout support
		// These are applied as inline styles by WordPress
		// Explicitly set flex-shrink to allow shrinking when needed
		flex-shrink: 1;
		// Set min-width to 0 to allow flex items to shrink below content size
		min-width: 0;
	}

	// Show outline when selected (editor-only)
	&.is-selected {
		outline: 1px dashed rgba(37, 99, 235, 0.3);
		outline-offset: -1px;
	}

	// CRITICAL: Mobile stack behavior
	// Must be duplicated from style.scss for editor/frontend parity
	&--mobile-stack {

		@media (max-width: 767px) {
			flex-direction: column !important;
		}
	}

	// CRITICAL: Must duplicate from style.scss for editor/frontend parity
	// Hover background and text colors using CSS custom properties
	&:hover {
		// Only apply background if hover background is set
		// !important needed to override WordPress color classes and gradients
		// Use 'background' instead of 'background-color' to override gradients
		&[style*="--dsg-hover-bg-color"] {
			background: var(--dsg-hover-bg-color) !important;
		}

		// Only apply text color if hover text color is set
		&[style*="--dsg-hover-text-color"] {
			color: var(--dsg-hover-text-color) !important;

			h1,
			h2,
			h3,
			h4,
			h5,
			h6,
			p,
			a,
			span,
			li,
			td,
			th,
			.wp-block-heading,
			.wp-block-paragraph {
				color: var(--dsg-hover-text-color) !important;
			}
		}
	}
}
