/**
 * Grid Container Block - Frontend Styles
 *
 * Frontend styles for the Grid Container block with responsive columns.
 *
 * @package DesignSetGo
 */

.dsg-grid {
	// CRITICAL: When nested inside other containers, needs full width
	// This doesn't break alignfull because alignfull uses margin calculations, not width
	width: 100%;

	&__inner {
		// CRITICAL: Grid container needs full width for proper column distribution
		// Without this, the grid shrinks to fit content instead of using available space
		width: 100%;

		// CRITICAL: Prevent grid items from overflowing their cells
		// Grid items with width: 100% can overflow if not constrained
		// This is essential for container blocks (Stack, Flex, etc.) inside Grid
		> * {
			min-width: 0;     // Allow shrinking below content width
			min-height: 0;    // Allow shrinking vertically
			width: 100%;      // Full width for text-align to work
		}
	}

	// Responsive column classes
	// Desktop columns are set via inline styles (default)
	// Tablet and mobile columns use media queries

	// Tablet breakpoint (≤ 1024px)
	@media (max-width: 1024px) {

		@for $i from 1 through 12 {
			&.dsg-grid-cols-tablet-#{$i} .dsg-grid__inner {
				grid-template-columns: repeat(#{$i}, 1fr) !important;
			}
		}
	}

	// Mobile breakpoint (≤ 767px)
	@media (max-width: 767px) {

		@for $i from 1 through 12 {
			&.dsg-grid-cols-mobile-#{$i} .dsg-grid__inner {
				grid-template-columns: repeat(#{$i}, 1fr) !important;
			}
		}
	}
}

/**
 * Layout-Constrained Margin Rules
 * Matches WordPress Group block behavior for proper spacing
 * Applied when layout support is enabled (type: constrained)
 *
 * CRITICAL: Uses :where() for zero specificity to allow WordPress's natural
 * cascade and blockGap system to work properly.
 */

// First child should have no top margin
:root :where(.dsg-grid__inner.is-layout-constrained) > :first-child {
	margin-block-start: 0;
}

// All children get consistent spacing
:root :where(.dsg-grid__inner.is-layout-constrained) > * {
	margin-block-start: 0;
	margin-block-end: 0;
}

// Last child should have no bottom margin
:root :where(.dsg-grid__inner.is-layout-constrained) > :last-child {
	margin-block-end: 0;
}
