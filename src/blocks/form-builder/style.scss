/**
 * Form Builder Block - Frontend Styles
 *
 * @since 1.0.0
 */

.dsgo-form-builder {
	// CSS Custom Properties (set from block attributes)
	--dsgo-form-field-spacing: 1.5rem;
	--dsgo-form-label-color: inherit;
	--dsgo-form-border-color: #d1d5db;
	--dsgo-form-border-radius: 0.375rem;
	--dsgo-form-focus-color: var(--wp--preset--color--primary, #2563eb);
	--dsgo-form-error-color: #dc2626;
	--dsgo-form-success-color: #16a34a;
	// Button colors intentionally not set here - uses theme defaults unless overridden

	// Form container
	width: 100%;
	max-width: 100%;
}

.dsgo-form {
	display: flex;
	flex-direction: column;
	gap: var(--dsgo-form-field-spacing);
	width: 100%;

	// Form fields container
	&__fields {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		gap: var(--dsgo-form-field-spacing);
		align-items: flex-start;
	}

	// Footer with submit button
	&__footer {
		display: flex;
		margin-top: var(--dsgo-form-field-spacing);
	}

	// Submit button - minimal styling to allow theme styles to work
	&__submit {
		// No color/background rules - let theme handle via wp-element-button
		// Custom colors and sizing applied as inline styles via block attributes

		// Minimal overrides for functionality
		cursor: pointer;

		&:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		// Inline button (for subscribe forms, etc.)
		// Sizing is controlled via block attributes (inline styles)
		&--inline {
			flex: 0 0 auto;
			width: auto;
		}

		// Loading state
		&.dsgo-form__submit--loading {
			position: relative;
			color: transparent;
			pointer-events: none;

			&::after {
				content: '';
				position: absolute;
				width: 16px;
				height: 16px;
				top: 50%;
				left: 50%;
				margin-left: -8px;
				margin-top: -8px;
				border: 2px solid currentcolor;
				border-radius: 50%;
				border-top-color: transparent;
				animation: dsgo-form-spinner 0.6s linear infinite;
				color: var(--dsgo-form-submit-color);
			}
		}
	}

	// Message container (success/error)
	&__message {
		margin-top: 1rem;
		padding: 1rem;
		border-radius: var(--dsgo-form-border-radius);
		font-size: 0.875rem;
		line-height: 1.5;

		&--success {
			color: var(--dsgo-form-success-color);
			background-color: rgb(220 252 231); // light green
			border: 1px solid var(--dsgo-form-success-color);
		}

		&--error {
			color: var(--dsgo-form-error-color);
			background-color: rgb(254 226 226); // light red
			border: 1px solid var(--dsgo-form-error-color);
		}

		&--editor {
			display: none;
		}
	}
}

// Turnstile widget container
.dsgo-turnstile-widget {
	margin-top: var(--dsgo-form-field-spacing);
	width: 100%;
}

// Button alignment modifiers
.dsgo-form-builder--align-left {

	.dsgo-form__footer {
		justify-content: flex-start;
	}
}

.dsgo-form-builder--align-center {

	.dsgo-form__footer {
		justify-content: center;
	}
}

.dsgo-form-builder--align-right {

	.dsgo-form__footer {
		justify-content: flex-end;
	}
}

// Inline button mode (for subscribe forms)
.dsgo-form-builder--button-inline {

	// CRITICAL: Button is inside .dsgo-form__fields as a flex child
	// No need to make .dsgo-form a flex container
	.dsgo-form__fields {
		// Fields container is already flex with wrap
		// Just ensure proper alignment for inline button
		align-items: flex-end; // Align button with input baseline
	}

	.dsgo-form__submit--inline {
		// Button sits inline with fields as a flex child
		// Sizing is controlled via block attributes (inline styles)
		flex: 0 0 auto;
		width: auto;
	}

	.dsgo-form__footer {
		display: none; // Hidden in inline mode
	}
}

// Loading spinner animation
@keyframes dsgo-form-spinner {

	0% {
		transform: rotate(0deg);
	}

	100% {
		transform: rotate(360deg);
	}
}

// Responsive adjustments
@media (max-width: 768px) {

	.dsgo-form__submit {
		width: 100%; // Full width on mobile for easier tapping
	}

	.dsgo-form-builder--align-left,
	.dsgo-form-builder--align-center,
	.dsgo-form-builder--align-right {

		.dsgo-form__footer {
			justify-content: stretch;
		}
	}
}

// Print styles
@media print {

	.dsgo-form__submit {
		display: none;
	}

	.dsgo-form__message {
		display: none;
	}
}
