/**
 * Form Builder Block - Frontend Styles
 *
 * @since 1.0.0
 */

.dsgo-form-builder {
	// CSS Custom Properties (set from block attributes)
	--dsgo-form-field-spacing: 1.5rem;
	--dsgo-form-label-color: inherit;
	--dsgo-form-border-color: #d1d5db;
	--dsgo-form-border-radius: 0.375rem;
	--dsgo-form-focus-color: var(--wp--preset--color--primary, #2563eb);
	--dsgo-form-error-color: #dc2626;
	--dsgo-form-success-color: #16a34a;
	// Button colors intentionally not set here - uses theme defaults unless overridden

	// Prevents padding + border from exceeding container width when border-radius is applied
	box-sizing: border-box;
	width: 100%;
	max-width: 100%;
}

.dsgo-form {
	display: flex;
	flex-direction: column;
	gap: var(--dsgo-form-field-spacing);
	width: 100%;

	// Form fields container
	&__fields {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		gap: var(--dsgo-form-field-spacing);
		align-items: flex-start;
	}

	// Footer with submit button
	&__footer {
		display: flex;
		margin-top: var(--dsgo-form-field-spacing);
	}

	// Submit button - hover behavior mirrors icon-button defaults
	&__submit {
		// No color/background rules - let theme handle via wp-element-button
		// Custom colors and sizing applied as inline styles via block attributes

		// Hover animation support
		overflow: hidden;
		position: relative;
		text-decoration: none !important;
		transition: all 0.2s ease;
		cursor: pointer;

		&:hover {
			opacity: 0.9;
			transform: translateY(-1px);
			text-decoration: none !important;
		}

		&:active {
			transform: translateY(0);
			text-decoration: none !important;
		}

		&:disabled {
			opacity: 0.5;
			cursor: not-allowed;

			&:hover {
				transform: none;
				opacity: 0.5;
			}
		}

		// Inline button (for subscribe forms, etc.)
		// Sizing is controlled via block attributes (inline styles)
		&--inline {
			flex: 0 0 auto;
			width: auto;
		}

		// Loading state
		&.dsgo-form__submit--loading {
			color: transparent;
			pointer-events: none;

			&::after {
				content: '';
				position: absolute;
				width: 16px;
				height: 16px;
				top: 50%;
				left: 50%;
				margin-left: -8px;
				margin-top: -8px;
				border: 2px solid currentcolor;
				border-radius: 50%;
				border-top-color: transparent;
				animation: dsgo-form-spinner 0.6s linear infinite;
				color: var(--dsgo-form-submit-color);
			}
		}
	}

	// Message container (success/error)
	&__message {
		margin-top: 1rem;
		padding: 1rem;
		border-radius: var(--dsgo-form-border-radius);
		font-size: 0.875rem;
		line-height: 1.5;

		&--success {
			color: var(--dsgo-form-success-color);
			background-color: rgb(220 252 231); // light green
			border: 1px solid var(--dsgo-form-success-color);
		}

		&--error {
			color: var(--dsgo-form-error-color);
			background-color: rgb(254 226 226); // light red
			border: 1px solid var(--dsgo-form-error-color);
		}

		&--editor {
			display: none;
		}
	}
}

// Turnstile widget container
.dsgo-turnstile-widget {
	margin-top: var(--dsgo-form-field-spacing);
	width: 100%;
}

// Button alignment modifiers
.dsgo-form-builder--align-left {

	.dsgo-form__footer {
		justify-content: flex-start;
	}
}

.dsgo-form-builder--align-center {

	.dsgo-form__footer {
		justify-content: center;
	}
}

.dsgo-form-builder--align-right {

	.dsgo-form__footer {
		justify-content: flex-end;
	}
}

// Inline button mode (for subscribe forms)
.dsgo-form-builder--button-inline {

	.dsgo-form__fields {
		align-items: flex-end;
	}

	// Auto-size the last form field to share its row with the button.
	// Overrides any explicit field width so users don't need to manually
	// shrink the last field when switching to inline mode.
	.dsgo-form-field:last-of-type {
		flex: 1 1 0 !important;
		max-width: none !important;
	}

	.dsgo-form__submit--inline {
		flex: 0 0 auto;
		width: auto;
		// Align button bottom with input bottom — compensates for the
		// form field's internal label-to-input gap (0.5rem)
		margin-bottom: 0.5rem;
	}

	.dsgo-form__footer {
		display: none;
	}
}

// Loading spinner animation
@keyframes dsgo-form-spinner {

	0% {
		transform: rotate(0deg);
	}

	100% {
		transform: rotate(360deg);
	}
}

// Responsive adjustments
@media (max-width: 768px) {

	.dsgo-form__submit {
		width: 100%; // Full width on mobile for easier tapping
	}

	.dsgo-form-builder--align-left,
	.dsgo-form-builder--align-center,
	.dsgo-form-builder--align-right {

		.dsgo-form__footer {
			justify-content: stretch;
		}
	}
}

// Print styles
@media print {

	.dsgo-form__submit {
		display: none;
	}

	.dsgo-form__message {
		display: none;
	}
}

// ============================================================================
// HOVER COLORS
// ============================================================================
// Custom hover colors via CSS variables (same pattern as icon-button)

// No animation — instant background transition
.dsgo-form__submit[style*="--dsgo-button-hover-bg"]:not([class*="dsgo-form__submit--"]):hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: background-color 0.3s ease;
}

// Zoom In — preserve transform transition
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--zoom-in:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: transform 0.3s ease, background-color 0.3s ease;
}

// Lift — preserve transform and box-shadow transitions
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--lift:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: transform 0.5s ease, box-shadow 0.5s ease, background-color 0.3s ease;
}

// Shrink — preserve transform transition
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--shrink:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: transform 0.4s ease, background-color 0.3s ease;
}

// Border Pulse — preserve border-width transition
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--border-pulse:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: border-width 0.3s ease, background-color 0.3s ease;
}

// Border Glow — preserve box-shadow transition
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--border-glow:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: all 0.3s ease, background-color 0.3s ease;
}

// Slide animations — fade in after slide completes
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--slide-left:hover,
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--slide-right:hover,
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--slide-down:hover,
.dsgo-form__submit[style*="--dsgo-button-hover-bg"].dsgo-form__submit--slide-up:hover {
	background-color: var(--dsgo-button-hover-bg) !important;
	opacity: 1;
	transition: background-color 0.1s ease 0.3s;
}

// Hover text color
.dsgo-form__submit[style*="--dsgo-button-hover-color"]:hover {
	color: var(--dsgo-button-hover-color) !important;
	transition: color 0.3s ease;
}

// ============================================================================
// HOVER ANIMATIONS
// ============================================================================

// Fill Diagonal — Diagonal sweep fill effect
.dsgo-form__submit.dsgo-form__submit--fill-diagonal {

	&:hover {
		opacity: 1;
		transform: none;
	}

	&::before {
		content: "";
		position: absolute;
		top: 0;
		left: -150%;
		width: 150%;
		height: 100%;
		background-color: var(--dsgo-button-hover-bg, rgba(0, 0, 0, 0.15));
		transition: left 0.5s ease;
		z-index: 0;
		transform: skewX(-20deg);
		transform-origin: top left;
	}

	// Button text above pseudo-element
	> * {
		position: relative;
		z-index: 1;
	}

	&:hover::before {
		left: 0;
	}
}

// Zoom In — Scale up on hover
.dsgo-form__submit.dsgo-form__submit--zoom-in {
	transform: scale(1);
	transition: transform 0.3s ease;

	&:hover {
		transform: scale(1.05);
		opacity: 1;
	}
}

// Slide Left — Background slides in from right
.dsgo-form__submit.dsgo-form__submit--slide-left {

	&:hover {
		opacity: 1;
		transform: none;
	}

	&::before {
		content: "";
		position: absolute;
		top: 0;
		right: -100%;
		width: 100%;
		height: 100%;
		background-color: var(--dsgo-button-hover-bg, rgba(0, 0, 0, 0.15));
		transition: right 0.3s ease;
		z-index: 0;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	&:hover::before {
		right: 0;
	}
}

// Slide Right — Background slides in from left
.dsgo-form__submit.dsgo-form__submit--slide-right {

	&:hover {
		opacity: 1;
		transform: none;
	}

	&::before {
		content: "";
		position: absolute;
		top: 0;
		left: -100%;
		width: 100%;
		height: 100%;
		background-color: var(--dsgo-button-hover-bg, rgba(0, 0, 0, 0.15));
		transition: left 0.3s ease;
		z-index: 0;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	&:hover::before {
		left: 0;
	}
}

// Slide Down — Background slides down from top
.dsgo-form__submit.dsgo-form__submit--slide-down {

	&:hover {
		opacity: 1;
		transform: none;
	}

	&::before {
		content: "";
		position: absolute;
		top: -100%;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: var(--dsgo-button-hover-bg, rgba(0, 0, 0, 0.15));
		transition: top 0.3s ease;
		z-index: 0;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	&:hover::before {
		top: 0;
	}
}

// Slide Up — Background slides up from bottom
.dsgo-form__submit.dsgo-form__submit--slide-up {

	&:hover {
		opacity: 1;
		transform: none;
	}

	&::before {
		content: "";
		position: absolute;
		bottom: -100%;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: var(--dsgo-button-hover-bg, rgba(0, 0, 0, 0.15));
		transition: bottom 0.3s ease;
		z-index: 0;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	&:hover::before {
		bottom: 0;
	}
}

// Border Pulse — Animated border effect using box-shadow
.dsgo-form__submit.dsgo-form__submit--border-pulse {
	transition: box-shadow 0.3s ease;

	&:hover {
		animation: dsgo-form-border-pulse 1s ease infinite;
		opacity: 1;
		transform: none;
	}
}

@keyframes dsgo-form-border-pulse {

	0%,
	100% {
		box-shadow: 0 0 0 0 currentcolor;
	}

	50% {
		box-shadow: 0 0 0 4px currentcolor;
	}
}

// Border Glow — Glowing border effect
.dsgo-form__submit.dsgo-form__submit--border-glow {
	transition: all 0.3s ease;

	&:hover {
		opacity: 1;
		transform: none;
		box-shadow: 0 0 15px currentcolor, 0 0 30px currentcolor, 0 0 45px currentcolor;
	}
}

// Lift — Elevate with shadow
.dsgo-form__submit.dsgo-form__submit--lift {
	transform: translateY(0);
	transition: transform 0.5s ease, box-shadow 0.5s ease;

	&:hover {
		transform: translateY(-8px);
		box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2), 0 6px 12px rgba(0, 0, 0, 0.15);
		opacity: 1;
	}
}

// Shrink — Subtle scale down
.dsgo-form__submit.dsgo-form__submit--shrink {
	transform: scale(1);
	transition: transform 0.4s ease;

	&:hover {
		transform: scale(0.95);
		opacity: 1;
	}
}

// No Hover — Explicit opt-out from hover animations
.dsgo-form__submit.dsgo-form__submit--no-hover {

	&:hover {
		opacity: 1;
		transform: none;
	}
}
