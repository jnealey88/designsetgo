/**
 * Comparison Table - Editor-only Styles
 *
 * Styles that apply only in the block editor for editing UI,
 * row controls, cell toolbars, and selection states.
 */

// Ensure the block is selectable in the editor
.wp-block-designsetgo-comparison-table {
	min-height: 100px;
}

// Row controls and editor UI
.dsgo-comparison-table-editor {
	// Modern floating row controls (move up/down, delete)
	&__row-controls {
		display: none;
		align-items: center;
		gap: 2px;
		margin-top: 6px;
		padding: 3px;
		background: #fff;
		border-radius: 20px;
		box-shadow:
			0 1px 3px rgba(0, 0, 0, 0.08),
			0 0 0 1px rgba(0, 0, 0, 0.04);
		width: fit-content;
	}

	&__row-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 28px;
		height: 28px;
		padding: 0;
		border: none;
		border-radius: 50%;
		background: transparent;
		color: #616161;
		cursor: pointer;
		transition: background-color 0.15s ease, color 0.15s ease;
		outline: none;
		line-height: 1;

		svg {
			display: block;
		}

		&:hover {
			background: #f0f0f0;
			color: #1e1e1e;
		}

		&:active {
			background: #e0e0e0;
		}

		&:focus-visible {
			box-shadow: 0 0 0 2px var(--wp-admin-theme-color, #007cba);
		}

		&:disabled {
			opacity: 0.3;
			cursor: not-allowed;

			&:hover {
				background: transparent;
				color: #616161;
			}
		}

		&--delete {
			color: #b32d2e;
			margin-left: 2px;

			&::before {
				content: "";
				position: absolute;
				left: -3px;
				top: 4px;
				bottom: 4px;
				width: 1px;
				background: #e0e0e0;
			}

			position: relative;

			&:hover {
				background: #fcecec;
				color: #8c1a1b;
			}

			&:active {
				background: #f5d5d5;
			}
		}
	}

	// Add row button
	&__add-row {
		display: flex;
		justify-content: center;
		padding: 12px 0;
		opacity: 0.6;
		transition: opacity 0.2s ease;

		&:hover {
			opacity: 1;
		}
	}

	// Column settings in inspector
	&__column-settings {

		h4 {
			font-size: 13px;
		}
	}

	// Cell type toolbar popup
	&__cell-toolbar {
		position: absolute;
		bottom: calc(100% + 4px);
		left: 50%;
		transform: translateX(-50%);
		z-index: 20;
		display: flex;
		align-items: center;
		gap: 2px;
		padding: 3px;
		background: #fff;
		border-radius: 20px;
		box-shadow:
			0 2px 12px rgba(0, 0, 0, 0.12),
			0 0 0 1px rgba(0, 0, 0, 0.04);
		white-space: nowrap;
	}

	&__type-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		min-width: 32px;
		height: 28px;
		padding: 0 8px;
		border: none;
		border-radius: 14px;
		background: transparent;
		color: #616161;
		font-size: 13px;
		font-weight: 500;
		cursor: pointer;
		transition: background-color 0.15s ease, color 0.15s ease;
		outline: none;

		&:hover {
			background: #f0f0f0;
			color: #1e1e1e;
		}

		&.is-active {
			background: var(--wp-admin-theme-color, #007cba);
			color: #fff;
		}

		&:focus-visible {
			box-shadow: 0 0 0 2px var(--wp-admin-theme-color, #007cba);
		}
	}
}

// Show row controls on row hover in editor
.dsgo-comparison-table__row:hover {

	.dsgo-comparison-table-editor__row-controls {
		display: flex;
	}
}

// Cell hover state in editor
.dsgo-comparison-table__cell:not(.dsgo-comparison-table__cell--label) {
	cursor: pointer;
	position: relative;

	&:hover {
		outline: 2px solid var(--wp-admin-theme-color, #007cba);
		outline-offset: -2px;
		border-radius: 2px;
	}
}

// Make RichText inputs in the table less distracting
// stylelint-disable-next-line selector-class-pattern
.dsgo-comparison-table .rich-text:focus {
	outline: none;
}

// Tooltip trigger in editor
.dsgo-comparison-table__tooltip-trigger {
	user-select: none;
}
