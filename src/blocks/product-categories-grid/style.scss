/**
 * Product Categories Grid Block - Frontend Styles
 *
 * Responsive CSS Grid layout for WooCommerce product category cards.
 * Each card is an <a> tag with an image/placeholder and an info section.
 *
 * @package DesignSetGo
 * @since 2.1.0
 */

.dsgo-product-categories-grid {
	display: grid;
	gap: var(--wp--style--block-gap, 1.5rem);

	// ==============================================
	// COLUMN VARIANTS
	// Applied via modifier class: --cols-2 through --cols-5.
	// ==============================================
	&--cols-2 {
		grid-template-columns: repeat(2, 1fr);
	}

	&--cols-3 {
		grid-template-columns: repeat(3, 1fr);
	}

	&--cols-4 {
		grid-template-columns: repeat(4, 1fr);
	}

	&--cols-5 {
		grid-template-columns: repeat(5, 1fr);
	}

	// ==============================================
	// CARD
	// <a> tag — reset link styles, enable overflow
	// clipping so the image scale stays within bounds.
	// ==============================================
	&__card {
		display: block;
		text-decoration: none;
		color: inherit;
		overflow: hidden;
		border-radius: inherit;

		// Scale image on hover via the image wrapper's overflow: hidden.
		&:hover,
		&:focus-visible {
			.dsgo-product-categories-grid__image {
				transform: scale(1.05);
			}
		}

		// Featured card spans two columns.
		&--featured {
			grid-column: span 2;
		}
	}

	// ==============================================
	// IMAGE WRAPPER
	// Acts as the aspect-ratio container and clips
	// the overflowing scaled image on hover.
	// ==============================================
	&__image-wrapper {
		position: relative;
		overflow: hidden;
		aspect-ratio: var(--dsgo-pcg-aspect-ratio, 3/4);

		// Subtle background visible when no image is set.
		background-color: color-mix(in srgb, currentColor 8%, transparent);
	}

	// ==============================================
	// IMAGE
	// ==============================================
	&__image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
		transition: transform 0.3s ease;
	}

	// ==============================================
	// PLACEHOLDER ICON
	// Shown when the category has no image.
	// Centered via flexbox; inherits text color for
	// theme-compatibility without hard-coded colors.
	// ==============================================
	&__placeholder-icon {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		color: currentColor;
		opacity: 0.35;
	}

	&__placeholder-svg {
		width: 3rem;
		height: 3rem;
		fill: none;
		stroke: currentColor;
		stroke-width: 1.5;
	}

	// ==============================================
	// INFO SECTION
	// ==============================================
	&__info {
		padding: var(--wp--preset--spacing--30, 1rem);
	}

	&__name {
		margin: 0;

		// Inherit font-size from block typography support; do not override.
		font-size: inherit;
		line-height: inherit;
	}

	&__count {
		display: block;
		margin-top: 0.25em;
		opacity: 0.7;
		font-size: 0.875em;
	}

	// ==============================================
	// TABLET — collapse 3-5 columns to 2
	// ==============================================
	@media (max-width: 781px) {

		:where(&--cols-3),
		:where(&--cols-4),
		:where(&--cols-5) {
			grid-template-columns: repeat(2, 1fr);
		}

		// Featured card can still span 2 at tablet width.
		:where(&--cols-3 &__card--featured),
		:where(&--cols-4 &__card--featured),
		:where(&--cols-5 &__card--featured) {
			grid-column: span 2;
		}
	}

	// ==============================================
	// MOBILE — single column, featured resets
	// ==============================================
	@media (max-width: 480px) {

		:where(&--cols-2),
		:where(&--cols-3),
		:where(&--cols-4),
		:where(&--cols-5) {
			grid-template-columns: 1fr;
		}

		:where(&__card--featured) {
			grid-column: span 1;
		}
	}
}
