/**
 * Flex Container Block - Frontend Styles
 *
 * Frontend styles for the Flex Container block.
 *
 * @package DesignSetGo
 */

.dsg-flex {
	// CRITICAL: When nested inside other containers, needs full width
	// This doesn't break alignfull because alignfull uses margin calculations, not width
	width: 100%;

	&__inner {
		// CRITICAL: Flex container needs full width for justify-content/align-items to work
		// Without this, the container shrinks to fit content and flex properties don't apply
		width: 100%;

		// CRITICAL: Child elements need full width for text-align to work properly
		// Without this, headings/paragraphs shrink to fit content and can't be left/center/right aligned
		> * {
			width: 100%;
		}
	}

	// Mobile stack behavior (screens < 768px)
	&--mobile-stack {

		@media (max-width: 767px) {

			.dsg-flex__inner {
				flex-direction: column !important;
			}
		}
	}
}

/**
 * Layout-Constrained Margin Rules
 * Matches WordPress Group block behavior for proper spacing
 * Applied when layout support is enabled (type: constrained)
 *
 * CRITICAL: Uses :where() for zero specificity to allow WordPress's natural
 * cascade and blockGap system to work properly.
 */

// First child should have no top margin
:root :where(.dsg-flex__inner.is-layout-constrained) > :first-child {
	margin-block-start: 0;
}

// All children get consistent spacing
:root :where(.dsg-flex__inner.is-layout-constrained) > * {
	margin-block-start: 0;
	margin-block-end: 0;
}

// Last child should have no bottom margin
:root :where(.dsg-flex__inner.is-layout-constrained) > :last-child {
	margin-block-end: 0;
}
