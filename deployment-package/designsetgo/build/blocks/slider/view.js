(()=>{const t=["fade","zoom"];class e{constructor(t){this.slider=t,this.viewport=t.querySelector(".dsg-slider__viewport"),this.track=t.querySelector(".dsg-slider__track"),this.originalSlides=Array.from(t.querySelectorAll(".dsg-slide")),0!==this.originalSlides.length&&(this.config=this.parseConfig(),this.currentIndex=parseInt(this.config.activeSlide)||0,this.isAnimating=!1,this.autoplayTimer=null,this.isInViewport=!1,this.touchStartX=0,this.touchEndX=0,this.dragStartX=0,this.isDragging=!1,this.cloneCount=0,this.realSlideCount=this.originalSlides.length,this.config.loop&&"slide"===this.config.effect&&this.setupInfiniteLoop(),this.slides=Array.from(this.track.querySelectorAll(".dsg-slide")),this.init())}parseConfig(){const e=this.slider.dataset.effect||"slide",s=t.includes(e);return{slidesPerView:s?1:parseInt(this.slider.dataset.slidesPerView)||1,slidesPerViewTablet:s?1:parseInt(this.slider.dataset.slidesPerViewTablet)||1,slidesPerViewMobile:s?1:parseInt(this.slider.dataset.slidesPerViewMobile)||1,effect:e,transitionDuration:this.slider.dataset.transitionDuration||"0.5s",transitionEasing:this.slider.dataset.transitionEasing||"ease-in-out",autoplay:"true"===this.slider.dataset.autoplay,autoplayInterval:parseInt(this.slider.dataset.autoplayInterval)||3e3,pauseOnHover:"true"===this.slider.dataset.pauseOnHover,pauseOnInteraction:"true"===this.slider.dataset.pauseOnInteraction,loop:"true"===this.slider.dataset.loop,draggable:"true"===this.slider.dataset.draggable,swipeable:"true"===this.slider.dataset.swipeable,freeMode:"true"===this.slider.dataset.freeMode,centeredSlides:"true"===this.slider.dataset.centeredSlides,showArrows:"true"===this.slider.dataset.showArrows,showDots:"true"===this.slider.dataset.showDots,mobileBreakpoint:parseInt(this.slider.dataset.mobileBreakpoint)||768,tabletBreakpoint:parseInt(this.slider.dataset.tabletBreakpoint)||1024,activeSlide:parseInt(this.slider.dataset.activeSlide)||0}}setupInfiniteLoop(){const t=Math.ceil(this.config.slidesPerView);this.cloneCount=t;for(let e=this.originalSlides.length-t;e<this.originalSlides.length;e++){const t=this.originalSlides[e].cloneNode(!0);t.classList.add("dsg-slide--clone"),t.classList.add("dsg-slide--clone-before"),t.setAttribute("aria-hidden","true"),t.removeAttribute("id"),this.track.insertBefore(t,this.track.firstChild)}for(let e=0;e<t;e++){const t=this.originalSlides[e].cloneNode(!0);t.classList.add("dsg-slide--clone"),t.classList.add("dsg-slide--clone-after"),t.setAttribute("aria-hidden","true"),t.removeAttribute("id"),this.track.appendChild(t)}this.currentIndex=this.currentIndex+this.cloneCount}init(){this.config.showArrows&&this.buildArrows(),this.config.showDots&&this.buildDots(),this.buildAnnouncementRegion(),this.goToSlide(this.currentIndex,!1),this.config.swipeable&&this.initSwipe(),this.config.draggable&&this.initDrag(),this.config.autoplay&&this.observeVisibility(),this.initKeyboard(),this.initResponsive(),this.respectReducedMotion()}buildArrows(){const t=this.slider.querySelector(".dsg-slider__arrows--editor-only");t&&t.remove();const e=document.createElement("div");e.className="dsg-slider__arrows",e.innerHTML='\n\t\t\t<button type="button" class="dsg-slider__arrow dsg-slider__arrow--prev" aria-label="Previous slide">\n\t\t\t\t<span>‹</span>\n\t\t\t</button>\n\t\t\t<button type="button" class="dsg-slider__arrow dsg-slider__arrow--next" aria-label="Next slide">\n\t\t\t\t<span>›</span>\n\t\t\t</button>\n\t\t',this.slider.appendChild(e),this.prevArrow=e.querySelector(".dsg-slider__arrow--prev"),this.nextArrow=e.querySelector(".dsg-slider__arrow--next"),this.prevArrow.addEventListener("click",()=>this.prev()),this.nextArrow.addEventListener("click",()=>this.next()),this.updateArrows()}buildDots(){const t=this.slider.querySelector(".dsg-slider__dots--editor-only");t&&t.remove();const e=document.createElement("div");e.className="dsg-slider__dots",e.setAttribute("role","tablist"),e.setAttribute("aria-label","Slide navigation");const s=this.cloneCount>0?this.realSlideCount:this.slides.length;for(let t=0;t<s;t++){const s=document.createElement("button");s.type="button",s.className="dsg-slider__dot",s.setAttribute("role","tab"),s.setAttribute("aria-label",`Go to slide ${t+1}`);const i=this.cloneCount>0?t+this.cloneCount:t;s.setAttribute("aria-selected",i===this.currentIndex?"true":"false"),s.addEventListener("click",()=>this.goToSlide(i)),e.appendChild(s)}this.slider.appendChild(e),this.dots=Array.from(e.querySelectorAll(".dsg-slider__dot")),this.updateDots()}buildAnnouncementRegion(){const t=document.createElement("div");t.className="dsg-slider__announcer",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-9999px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",this.slider.appendChild(t),this.announcer=t}goToSlide(t,e=!0){if(this.isAnimating&&e)return;const s=this.currentIndex;this.config.loop&&this.cloneCount>0&&"slide"===this.config.effect?this.currentIndex=t:this.config.loop?(t<0&&(t=this.slides.length-1),t>=this.slides.length&&(t=0),this.currentIndex=t):this.currentIndex=Math.max(0,Math.min(t,this.slides.length-1)),this.isAnimating=!!e,"slide"===this.config.effect?this.applySlideTransition(e):"fade"===this.config.effect?this.applyFadeTransition():"zoom"===this.config.effect&&this.applyZoomTransition(),this.updateArrows(),this.updateDots(),this.updateARIA(),this.config.pauseOnInteraction&&this.autoplayTimer&&this.stopAutoplay();const i=this.getRealIndex(this.currentIndex);if(this.slider.dispatchEvent(new CustomEvent("dsg-slider-change",{detail:{previousIndex:this.getRealIndex(s),currentIndex:i}})),this.announcer&&e){const t=this.cloneCount>0?this.realSlideCount:this.slides.length;this.announcer.textContent=`Slide ${i+1} of ${t}`}if(e){const t=1e3*parseFloat(this.config.transitionDuration);setTimeout(()=>{this.isAnimating=!1},t)}}applySlideTransition(t=!0){const e=this.slides[0].offsetWidth,s=parseFloat(window.getComputedStyle(this.track).gap)||0,i=-this.currentIndex*(e+s);if(t){if(this.track.style.transform=`translateX(${i}px)`,this.cloneCount>0){const t=1e3*parseFloat(this.config.transitionDuration);setTimeout(()=>{let t=!1,i=this.currentIndex;this.currentIndex>=this.cloneCount+this.realSlideCount?(i=this.cloneCount+(this.currentIndex-(this.cloneCount+this.realSlideCount)),t=!0):this.currentIndex<this.cloneCount&&(i=this.cloneCount+this.realSlideCount-(this.cloneCount-this.currentIndex),t=!0),t&&(this.currentIndex=i,this.track.style.transition="none",this.track.style.transform=`translateX(${-i*(e+s)}px)`,this.track.offsetHeight,this.track.style.transition="",this.updateDots(),this.updateARIA())},t)}}else this.track.style.transition="none",this.track.style.transform=`translateX(${i}px)`,this.track.offsetHeight,this.track.style.transition=""}applyFadeTransition(){this.slides.forEach((t,e)=>{t.classList.toggle("dsg-slide--active",e===this.currentIndex)})}applyZoomTransition(){this.slides.forEach((t,e)=>{t.classList.toggle("dsg-slide--active",e===this.currentIndex)})}next(){this.goToSlide(this.currentIndex+1)}prev(){this.goToSlide(this.currentIndex-1)}updateArrows(){if(this.prevArrow&&this.nextArrow)if(this.config.loop)this.prevArrow.disabled=!1,this.nextArrow.disabled=!1;else{const t=this.cloneCount,e=this.cloneCount>0?this.cloneCount+this.realSlideCount-1:this.slides.length-1;this.prevArrow.disabled=this.currentIndex===t,this.nextArrow.disabled=this.currentIndex===e}}getRealIndex(t){if(0===this.cloneCount)return t;const e=t-this.cloneCount;return e<0?this.realSlideCount+e:e>=this.realSlideCount?e-this.realSlideCount:e}updateDots(){if(!this.dots)return;const t=this.getRealIndex(this.currentIndex);this.dots.forEach((e,s)=>{const i=s===t;e.classList.toggle("dsg-slider__dot--active",i),e.setAttribute("aria-selected",i?"true":"false")})}updateARIA(){this.slides.forEach((t,e)=>{const s=e===this.currentIndex;t.setAttribute("aria-hidden",s?"false":"true"),t.setAttribute("tabindex",s?"0":"-1")})}initSwipe(){this.track.addEventListener("touchstart",t=>{this.touchStartX=t.touches[0].clientX},{passive:!0}),this.track.addEventListener("touchend",t=>{this.touchEndX=t.changedTouches[0].clientX,this.handleSwipe()},{passive:!0})}handleSwipe(){const t=this.touchStartX-this.touchEndX;Math.abs(t)>50&&(t>0?this.next():this.prev())}initDrag(){let t=0,e=0,s=0;this.handleMouseMove=i=>{if(!this.isDragging)return;const n=i.clientX;e=s+(n-t),"slide"===this.config.effect&&(this.track.style.transform=`translateX(${e}px)`)},this.handleMouseUp=()=>{if(!this.isDragging)return;this.isDragging=!1,this.track.style.cursor="grab";const t=e-s;Math.abs(t)>50?t<0?this.next():this.prev():this.goToSlide(this.currentIndex)},this.handleMouseDown=i=>{this.isDragging=!0,t=i.clientX,this.track.style.cursor="grabbing",s=e},this.track.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.track.style.cursor="grab"}initKeyboard(){this.slider.addEventListener("keydown",t=>{if(t.target===this.slider||this.slider.contains(t.target.ownerDocument.activeElement))switch(t.key){case"ArrowLeft":t.preventDefault(),this.prev();break;case"ArrowRight":t.preventDefault(),this.next();break;case"Home":t.preventDefault(),this.goToSlide(0);break;case"End":t.preventDefault(),this.goToSlide(this.slides.length-1)}}),this.slider.hasAttribute("tabindex")||this.slider.setAttribute("tabindex","0")}initResponsive(){let t;this.handleResize=()=>{clearTimeout(t),t=setTimeout(()=>{this.isDestroyed||this.goToSlide(this.currentIndex,!1)},250)},window.addEventListener("resize",this.handleResize)}observeVisibility(){new window.IntersectionObserver(t=>{t.forEach(t=>{this.isInViewport=t.isIntersecting,this.isInViewport?this.startAutoplay():this.stopAutoplay()})},{threshold:.5}).observe(this.slider),this.config.pauseOnHover&&(this.slider.addEventListener("mouseenter",()=>this.stopAutoplay()),this.slider.addEventListener("mouseleave",()=>{this.isInViewport&&this.startAutoplay()}))}startAutoplay(){this.config.autoplay&&!this.autoplayTimer&&(this.autoplayTimer=setInterval(()=>{this.next()},this.config.autoplayInterval))}stopAutoplay(){this.autoplayTimer&&(clearInterval(this.autoplayTimer),this.autoplayTimer=null)}respectReducedMotion(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this.config.transitionDuration="0s",this.track.style.transition="none",this.slides.forEach(t=>{t.style.transition="none"}),this.config.autoplay&&this.stopAutoplay())}destroy(){this.stopAutoplay(),this.handleMouseMove&&document.removeEventListener("mousemove",this.handleMouseMove),this.handleMouseUp&&document.removeEventListener("mouseup",this.handleMouseUp),this.handleMouseDown&&this.track&&this.track.removeEventListener("mousedown",this.handleMouseDown),this.handleResize&&window.removeEventListener("resize",this.handleResize),this.isDestroyed=!0}}const s=new WeakMap;document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".dsg-slider").forEach(t=>{const i=new e(t);s.set(t,i)})}),window.addEventListener("beforeunload",()=>{document.querySelectorAll(".dsg-slider").forEach(t=>{const e=s.get(t);e&&e.destroy&&e.destroy()})})})();