!function(){"use strict";class e{constructor(e){this.element=e,this.nav=e.querySelector(".dsgo-tabs__nav"),this.panels=e.querySelectorAll(".dsgo-tab"),this.activeTab=parseInt(e.dataset.activeTab)||0,this.mobileBreakpoint=parseInt(e.dataset.mobileBreakpoint)||768,this.mobileMode=e.dataset.mobileMode||"accordion",this.enableDeepLinking="true"===e.dataset.deepLinking,this.init()}createDashicon(e){const t=document.createElement("span");t.className="dsgo-tabs__tab-icon";const s=document.createElement("span"),a=e.replace(/[^a-z0-9\-]/g,"");return s.className=`dashicons dashicons-${a}`,t.appendChild(s),t}init(){let e;this.buildNavigation(),this.handleResize(),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>this.handleResize(),150)});let t=0;if(this.enableDeepLinking){const e=window.location.hash.substring(1);if(e){const s=this.element.querySelector(`#${e}`);if(s){const e=Array.from(this.panels).indexOf(s);-1!==e&&(t=e)}}}this.setActiveTab(t,!1),this.enableDeepLinking&&this.setupDeepLinkingListeners()}buildNavigation(){if(!this.nav||0===this.panels.length)return;this.nav.replaceChildren();const e=document.createElement("a");e.href=`#${this.panels[this.activeTab].id}`,e.className="dsgo-tabs__skip-link",e.textContent="Skip to tab content",e.addEventListener("click",e=>{e.preventDefault(),this.panels[this.activeTab].focus()}),this.nav.appendChild(e),this.panels.forEach((e,t)=>{const s=e.id.replace("panel-","tab-"),a=e.getAttribute("aria-label")||this.getTabTitle(e)||`Tab ${t+1}`,i=e.dataset.icon,n=e.dataset.iconPosition||"left",o=document.createElement("button");if(o.className="dsgo-tabs__tab",o.id=s,o.setAttribute("type","button"),o.setAttribute("role","tab"),o.setAttribute("aria-selected",t===this.activeTab?"true":"false"),o.setAttribute("aria-controls",e.id),o.setAttribute("tabindex",t===this.activeTab?"0":"-1"),o.dataset.tabIndex=t,i)if(o.classList.add("has-icon",`icon-${n}`),"top"===n){const e=document.createElement("span");e.className="dsgo-tabs__tab-icon-top",e.appendChild(this.createDashicon(i)),o.appendChild(e)}else"left"===n&&o.appendChild(this.createDashicon(i));const l=document.createElement("span");l.className="dsgo-tabs__tab-title",l.textContent=a,o.appendChild(l),i&&"right"===n&&o.appendChild(this.createDashicon(i)),this.nav.appendChild(o)}),this.nav.addEventListener("click",e=>{const t=e.target.closest(".dsgo-tabs__tab");if(!t)return;const s=parseInt(t.dataset.tabIndex);isNaN(s)||this.setActiveTab(s)}),this.nav.addEventListener("keydown",e=>{const t=e.target.closest(".dsgo-tabs__tab");if(!t)return;const s=parseInt(t.dataset.tabIndex);isNaN(s)||this.handleKeyboard(e,s)})}getTabTitle(e){const t=e.querySelector(".dsgo-tab__content");if(!t)return null;const s=t.querySelector("h1, h2, h3, h4, h5, h6");return s?s.textContent:null}setActiveTab(e,t=!0){if(e<0||e>=this.panels.length)return;this.activeTab=e;const s=this.element.classList.contains("dsgo-tabs--accordion");if(this.nav.querySelectorAll(".dsgo-tabs__tab").forEach((t,s)=>{const a=s===e;t.classList.toggle("is-active",a),t.setAttribute("aria-selected",a?"true":"false"),t.setAttribute("tabindex",a?"0":"-1")}),this.panels.forEach((t,a)=>{const i=a===e;t.classList.toggle("is-active",i),s||(t.hidden=!i);const n=t.querySelector(".dsgo-tab__accordion-header");n&&n.setAttribute("aria-expanded",i?"true":"false")}),this.enableDeepLinking&&t){const t=this.panels[e];t.id&&history.replaceState(null,null,`#${t.id}`)}this.element.dispatchEvent(new CustomEvent("dsgo-tab-change",{detail:{index:e,panel:this.panels[e]}}))}handleKeyboard(e,t){let s=t;"horizontal"==(this.element.classList.contains("dsgo-tabs--vertical")?"vertical":"horizontal")?"ArrowLeft"===e.key?(s=t>0?t-1:this.panels.length-1,e.preventDefault()):"ArrowRight"===e.key&&(s=t<this.panels.length-1?t+1:0,e.preventDefault()):"ArrowUp"===e.key?(s=t>0?t-1:this.panels.length-1,e.preventDefault()):"ArrowDown"===e.key&&(s=t<this.panels.length-1?t+1:0,e.preventDefault()),"Home"===e.key?(s=0,e.preventDefault()):"End"===e.key&&(s=this.panels.length-1,e.preventDefault()),s!==t&&(this.setActiveTab(s),this.nav.querySelectorAll(".dsgo-tabs__tab")[s].focus())}setupDeepLinkingListeners(){window.addEventListener("hashchange",()=>{const e=window.location.hash.substring(1);if(e){const t=this.element.querySelector(`#${e}`);if(t){const e=Array.from(this.panels).indexOf(t);-1!==e&&this.setActiveTab(e,!1)}}})}handleResize(){window.innerWidth<this.mobileBreakpoint?(this.element.classList.add("is-mobile"),"accordion"===this.mobileMode?this.convertToAccordion():"dropdown"===this.mobileMode&&this.convertToDropdown()):(this.element.classList.remove("is-mobile"),this.restoreTabsMode())}convertToAccordion(){this.element.classList.add("dsgo-tabs--accordion"),this.element.classList.remove("dsgo-tabs--dropdown"),this.nav&&(this.nav.style.display="none"),this.panels.forEach(e=>{e.hidden=!1}),this.panels.forEach((e,t)=>{let s=e.querySelector(".dsgo-tab__accordion-header");if(!s){s=document.createElement("button"),s.className="dsgo-tab__accordion-header",s.setAttribute("type","button"),s.setAttribute("aria-expanded",t===this.activeTab?"true":"false");const a=e.getAttribute("aria-label")||this.getTabTitle(e)||`Tab ${t+1}`;s.textContent=a,s.addEventListener("click",()=>{this.setActiveTab(t)}),e.insertBefore(s,e.firstChild)}s.setAttribute("aria-expanded",t===this.activeTab?"true":"false")})}convertToDropdown(){this.element.classList.add("dsgo-tabs--dropdown"),this.element.classList.remove("dsgo-tabs--accordion");let e=this.element.querySelector(".dsgo-tabs__dropdown");e||(e=document.createElement("select"),e.className="dsgo-tabs__dropdown",e.setAttribute("aria-label","Select tab"),this.panels.forEach((t,s)=>{const a=document.createElement("option");a.value=s,a.textContent=t.getAttribute("aria-label")||this.getTabTitle(t)||`Tab ${s+1}`,a.selected=s===this.activeTab,e.appendChild(a)}),e.addEventListener("change",e=>{this.setActiveTab(parseInt(e.target.value))}),this.element.insertBefore(e,this.element.querySelector(".dsgo-tabs__panels"))),this.nav&&(this.nav.style.display="none"),e.value=this.activeTab}restoreTabsMode(){this.element.classList.remove("dsgo-tabs--accordion","dsgo-tabs--dropdown"),this.nav&&(this.nav.style.display="");const e=this.element.querySelector(".dsgo-tabs__dropdown");e&&e.remove(),this.panels.forEach(e=>{const t=e.querySelector(".dsgo-tab__accordion-header");t&&t.remove()}),this.panels.forEach((e,t)=>{e.hidden=t!==this.activeTab})}}function t(){document.querySelectorAll(".dsgo-tabs").forEach(t=>{new e(t)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.DSGTabs=e}();