document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".dsgo-image-accordion"),t="ontouchstart"in window||navigator.maxTouchPoints>0;e.forEach(e=>{const a=e.getAttribute("data-trigger-type")||"hover",n=parseInt(e.getAttribute("data-default-expanded"),10)||0,r=e.querySelectorAll(".dsgo-image-accordion-item");function o(e){r.forEach(t=>{t===e?(t.classList.add("is-expanded"),t.classList.remove("is-collapsed"),t.setAttribute("aria-expanded","true")):(t.classList.remove("is-expanded"),t.classList.add("is-collapsed"),t.setAttribute("aria-expanded","false"))})}function s(){r.forEach(e=>{e.classList.remove("is-expanded","is-collapsed"),e.setAttribute("aria-expanded","false")})}0!==r.length&&(n>0&&n<=r.length?o(r[n-1]):s(),r.forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("aria-label",`Image panel ${t+1}`),e.setAttribute("aria-expanded","false"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0")}),("hover"===a&&!t||"hover"===a)&&(r.forEach(e=>{e.addEventListener("mouseenter",function(){t||o(e)}),e.addEventListener("focus",function(){o(e)})}),e.addEventListener("mouseleave",function(){t||(n>0&&n<=r.length?o(r[n-1]):s())})),(t||"click"===a)&&r.forEach(e=>{e.addEventListener("click",function(t){"A"===t.target.tagName||"BUTTON"===t.target.tagName||t.target.closest("a")||t.target.closest("button")||o(e)}),e.addEventListener("keydown",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),o(e))})}),e.addEventListener("keydown",function(e){const t=e.target.ownerDocument.activeElement,a=Array.from(r).indexOf(t);if(-1===a)return;let n;switch(e.key){case"ArrowRight":case"ArrowDown":e.preventDefault(),n=(a+1)%r.length,r[n].focus();break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),n=(a-1+r.length)%r.length,r[n].focus();break;case"Home":e.preventDefault(),r[0].focus();break;case"End":e.preventDefault(),r[r.length-1].focus()}}))})});