{"version":3,"file":"blocks/map/view.js","mappings":"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","sources":["webpack://designsetgo/./src/blocks/map/handlers/DSGMap.js","webpack://designsetgo/./src/blocks/map/handlers/googlemaps-handler.js","webpack://designsetgo/./src/blocks/map/handlers/openstreetmap-handler.js","webpack://designsetgo/./src/blocks/map/utils/script-loader.js","webpack://designsetgo/webpack/bootstrap","webpack://designsetgo/webpack/runtime/define property getters","webpack://designsetgo/webpack/runtime/hasOwnProperty shorthand","webpack://designsetgo/./src/blocks/map/view.js"],"sourcesContent":["/**\n * DSGMap Class - Main map instance manager.\n *\n * Manages individual map instances, configuration parsing, privacy mode, and initialization.\n */\n\nimport { initOpenStreetMap } from './openstreetmap-handler';\nimport { initGoogleMap } from './googlemaps-handler';\n\n/**\n * DSGMap Class - Manages individual map instances.\n */\nexport default class DSGMap {\n\t/**\n\t * Constructor.\n\t *\n\t * @param {HTMLElement} element - Map block element.\n\t */\n\tconstructor(element) {\n\t\tthis.element = element;\n\t\tthis.config = this.parseConfig();\n\t\tthis.mapInstance = null;\n\t\tthis.loadMapBound = this.loadMap.bind(this);\n\n\t\tif (this.config.privacyMode) {\n\t\t\tthis.setupPrivacyMode();\n\t\t} else {\n\t\t\tthis.loadMap();\n\t\t}\n\t}\n\n\t/**\n\t * Parse configuration from data attributes with validation.\n\t *\n\t * @return {Object} Parsed and validated configuration.\n\t */\n\tparseConfig() {\n\t\tconst dataset = this.element.dataset;\n\n\t\t// Parse and validate coordinates\n\t\tconst lat = parseFloat(dataset.dsgoLat);\n\t\tconst lng = parseFloat(dataset.dsgoLng);\n\t\tconst zoom = parseInt(dataset.dsgoZoom);\n\n\t\treturn {\n\t\t\tprovider: dataset.dsgoProvider || 'openstreetmap',\n\t\t\t// Clamp latitude between -90 and 90\n\t\t\tlat: Number.isFinite(lat) ? Math.max(-90, Math.min(90, lat)) : 0,\n\t\t\t// Clamp longitude between -180 and 180\n\t\t\tlng: Number.isFinite(lng) ? Math.max(-180, Math.min(180, lng)) : 0,\n\t\t\t// Clamp zoom between 1 and 20\n\t\t\tzoom: Number.isInteger(zoom) && zoom >= 1 && zoom <= 20 ? zoom : 13,\n\t\t\taddress: dataset.dsgoAddress || '',\n\t\t\tmarkerIcon: dataset.dsgoMarkerIcon || 'ðŸ“',\n\t\t\tmarkerColor: dataset.dsgoMarkerColor || '#e74c3c',\n\t\t\tmarkerPopup: dataset.dsgoMarkerPopup || '',\n\t\t\tgrayscale: dataset.dsgoGrayscale === 'true',\n\t\t\tprivacyMode: dataset.dsgoPrivacyMode === 'true',\n\t\t\tapiKey: dataset.dsgoApiKey || '',\n\t\t\tmapStyle: dataset.dsgoMapStyle || 'standard',\n\t\t};\n\t}\n\n\t/**\n\t * Setup privacy mode (click-to-load).\n\t */\n\tsetupPrivacyMode() {\n\t\tconst button = this.element.querySelector('.dsgo-map__load-button');\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tbutton.addEventListener('click', this.loadMapBound);\n\t}\n\n\t/**\n\t * Load and initialize the map.\n\t */\n\tasync loadMap() {\n\t\ttry {\n\t\t\tif (this.config.provider === 'googlemaps') {\n\t\t\t\tawait initGoogleMap(this);\n\t\t\t} else {\n\t\t\t\tawait initOpenStreetMap(this);\n\t\t\t}\n\n\t\t\t// Hide privacy overlay if present\n\t\t\tconst overlay = this.element.querySelector(\n\t\t\t\t'.dsgo-map__privacy-overlay'\n\t\t\t);\n\t\t\tif (overlay) {\n\t\t\t\toverlay.style.display = 'none';\n\t\t\t}\n\n\t\t\t// Focus management for accessibility\n\t\t\tconst container = this.element.querySelector(\n\t\t\t\t'.dsgo-map__container'\n\t\t\t);\n\t\t\tif (container && this.config.privacyMode) {\n\t\t\t\t// Make container focusable and move focus to it\n\t\t\t\tcontainer.setAttribute('tabindex', '-1');\n\t\t\t\tcontainer.focus();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error('Failed to load map:', error);\n\t\t\tthis.showError('Failed to load map. Please check your settings.');\n\t\t}\n\t}\n\n\t/**\n\t * Show error message.\n\t *\n\t * @param {string} message - Error message to display.\n\t */\n\tshowError(message) {\n\t\tconst errorDiv = document.createElement('div');\n\t\terrorDiv.className = 'dsgo-map__error';\n\t\terrorDiv.textContent = message;\n\t\terrorDiv.style.cssText = `\n\t\t\tpadding: 20px;\n\t\t\ttext-align: center;\n\t\t\tcolor: #d63638;\n\t\t\tbackground: #fef7f7;\n\t\t\tborder: 1px solid #f0c0c0;\n\t\t\tborder-radius: 4px;\n\t\t`;\n\n\t\t// Hide privacy overlay if present\n\t\tconst overlay = this.element.querySelector(\n\t\t\t'.dsgo-map__privacy-overlay'\n\t\t);\n\t\tif (overlay) {\n\t\t\toverlay.style.display = 'none';\n\t\t}\n\n\t\tthis.element.appendChild(errorDiv);\n\t}\n\n\t/**\n\t * Cleanup and destroy the map instance.\n\t * Removes event listeners and frees memory.\n\t */\n\tdestroy() {\n\t\t// Remove privacy mode event listener\n\t\tif (this.config.privacyMode) {\n\t\t\tconst button = this.element.querySelector('.dsgo-map__load-button');\n\t\t\tif (button) {\n\t\t\t\tbutton.removeEventListener('click', this.loadMapBound);\n\t\t\t}\n\t\t}\n\n\t\t// Clean up map instance\n\t\tif (this.mapInstance) {\n\t\t\ttry {\n\t\t\t\t// Leaflet cleanup (OpenStreetMap)\n\t\t\t\tif (\n\t\t\t\t\tthis.config.provider === 'openstreetmap' &&\n\t\t\t\t\tthis.mapInstance.remove\n\t\t\t\t) {\n\t\t\t\t\tthis.mapInstance.remove();\n\t\t\t\t}\n\t\t\t\t// Google Maps cleanup\n\t\t\t\telse if (\n\t\t\t\t\tthis.config.provider === 'googlemaps' &&\n\t\t\t\t\twindow.google?.maps\n\t\t\t\t) {\n\t\t\t\t\t// Google Maps doesn't have a destroy method, just null the reference\n\t\t\t\t\t// The garbage collector will handle cleanup\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('Error cleaning up map:', error);\n\t\t\t}\n\n\t\t\tthis.mapInstance = null;\n\t\t}\n\n\t\t// Clear element reference\n\t\tthis.element = null;\n\t}\n}\n","/**\n * Google Maps Handler\n *\n * Handles Google Maps initialization and styling.\n */\n\nimport { loadGoogleMaps } from '../utils/script-loader';\n\n/**\n * Google Maps style configurations.\n * Complete styles that properly show roads, water, and terrain.\n */\nexport const GOOGLE_MAP_STYLES = {\n\tsilver: [\n\t\t{ elementType: 'geometry', stylers: [{ color: '#f5f5f5' }] },\n\t\t{ elementType: 'labels.icon', stylers: [{ visibility: 'off' }] },\n\t\t{ elementType: 'labels.text.fill', stylers: [{ color: '#616161' }] },\n\t\t{ elementType: 'labels.text.stroke', stylers: [{ color: '#f5f5f5' }] },\n\t\t{\n\t\t\tfeatureType: 'road',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#ffffff' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road',\n\t\t\telementType: 'geometry.stroke',\n\t\t\tstylers: [{ color: '#d6d6d6' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road.highway',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#dadada' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road.highway',\n\t\t\telementType: 'geometry.stroke',\n\t\t\tstylers: [{ color: '#b3b3b3' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'water',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#c9c9c9' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'water',\n\t\t\telementType: 'labels.text.fill',\n\t\t\tstylers: [{ color: '#9e9e9e' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'poi',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#eeeeee' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'poi.park',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#e5e5e5' }],\n\t\t},\n\t],\n\tdark: [\n\t\t{ elementType: 'geometry', stylers: [{ color: '#212121' }] },\n\t\t{ elementType: 'labels.text.fill', stylers: [{ color: '#757575' }] },\n\t\t{ elementType: 'labels.text.stroke', stylers: [{ color: '#212121' }] },\n\t\t{\n\t\t\tfeatureType: 'road',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#2c2c2c' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road',\n\t\t\telementType: 'geometry.stroke',\n\t\t\tstylers: [{ color: '#212121' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road',\n\t\t\telementType: 'labels.text.fill',\n\t\t\tstylers: [{ color: '#8a8a8a' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road.highway',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#3c3c3c' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'road.highway',\n\t\t\telementType: 'geometry.stroke',\n\t\t\tstylers: [{ color: '#1c1c1c' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'water',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#000000' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'water',\n\t\t\telementType: 'labels.text.fill',\n\t\t\tstylers: [{ color: '#3d3d3d' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'poi',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#263238' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'poi.park',\n\t\t\telementType: 'geometry',\n\t\t\tstylers: [{ color: '#181818' }],\n\t\t},\n\t\t{\n\t\t\tfeatureType: 'poi.park',\n\t\t\telementType: 'labels.text.fill',\n\t\t\tstylers: [{ color: '#616161' }],\n\t\t},\n\t],\n};\n\n/**\n * Initialize Google Maps for a DSGMap instance.\n * Uses modern dynamic library import pattern.\n *\n * @param {Object} dsgMap - DSGMap instance (this context).\n * @return {Promise} Resolves when map is initialized.\n */\nexport async function initGoogleMap(dsgMap) {\n\t// Load Google Maps bootstrap\n\tawait loadGoogleMaps(dsgMap.config.apiKey);\n\n\t// Dynamically import the Maps and Marker libraries (modern async pattern)\n\tconst { Map } = await window.google.maps.importLibrary('maps');\n\tconst { AdvancedMarkerElement, PinElement } =\n\t\tawait window.google.maps.importLibrary('marker');\n\n\t// Get or create map container\n\tlet container = dsgMap.element.querySelector('.dsgo-map__container');\n\tif (!container) {\n\t\tcontainer = document.createElement('div');\n\t\tcontainer.className = 'dsgo-map__container';\n\t\tcontainer.setAttribute('role', 'region');\n\t\tcontainer.setAttribute('aria-label', 'Map');\n\t\tdsgMap.element.appendChild(container);\n\t}\n\n\t// Map options (need mapId for advanced markers)\n\tconst mapOptions = {\n\t\tcenter: { lat: dsgMap.config.lat, lng: dsgMap.config.lng },\n\t\tzoom: dsgMap.config.zoom,\n\t\tmapId: 'dsgo-map-' + Math.random().toString(36).substr(2, 9), // Unique ID for advanced markers\n\t};\n\n\t// Apply style if not standard\n\tif (\n\t\tdsgMap.config.mapStyle !== 'standard' &&\n\t\tGOOGLE_MAP_STYLES[dsgMap.config.mapStyle]\n\t) {\n\t\tmapOptions.styles = GOOGLE_MAP_STYLES[dsgMap.config.mapStyle];\n\t}\n\n\t// Initialize Google Map\n\tdsgMap.mapInstance = new Map(container, mapOptions);\n\n\t// Create marker with standard Google Maps pin (customizable color only)\n\tconst pinElement = new PinElement({\n\t\tbackground: dsgMap.config.markerColor || '#e74c3c',\n\t\tborderColor: '#ffffff',\n\t\tglyphColor: '#ffffff',\n\t\tscale: 1.2,\n\t});\n\n\t// Add marker using AdvancedMarkerElement (no popup - removed per user request)\n\tnew AdvancedMarkerElement({\n\t\tmap: dsgMap.mapInstance,\n\t\tposition: { lat: dsgMap.config.lat, lng: dsgMap.config.lng },\n\t\tcontent: pinElement.element,\n\t});\n}\n","/**\n * OpenStreetMap Handler\n *\n * Handles OpenStreetMap (Leaflet.js) initialization.\n */\n\nimport { loadLeaflet } from '../utils/script-loader';\n\n/**\n * Initialize OpenStreetMap with Leaflet for a DSGMap instance.\n *\n * @param {Object} dsgMap - DSGMap instance (this context).\n * @return {Promise} Resolves when map is initialized.\n */\nexport async function initOpenStreetMap(dsgMap) {\n\tawait loadLeaflet();\n\n\t// Get or create map container\n\tlet container = dsgMap.element.querySelector('.dsgo-map__container');\n\tif (!container) {\n\t\tcontainer = document.createElement('div');\n\t\tcontainer.className = 'dsgo-map__container';\n\t\tcontainer.setAttribute('role', 'region');\n\t\tcontainer.setAttribute('aria-label', 'Map');\n\t\tdsgMap.element.appendChild(container);\n\t}\n\n\t// Initialize Leaflet map\n\tdsgMap.mapInstance = window.L.map(container, {\n\t\tcenter: [dsgMap.config.lat, dsgMap.config.lng],\n\t\tzoom: dsgMap.config.zoom,\n\t});\n\n\t// Add tile layer\n\twindow.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\tattribution:\n\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\tmaxZoom: 19,\n\t}).addTo(dsgMap.mapInstance);\n\n\t// Create custom marker (XSS-safe)\n\tconst iconContainer = document.createElement('div');\n\ticonContainer.textContent = dsgMap.config.markerIcon; // Treats as text, prevents XSS\n\ticonContainer.style.cssText = `\n\t\tfont-size: 32px;\n\t\tline-height: 1;\n\t\ttext-align: center;\n\t\tfilter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));\n\t`;\n\n\tconst customIcon = window.L.divIcon({\n\t\thtml: iconContainer.outerHTML,\n\t\tclassName: 'dsgo-map__custom-marker',\n\t\ticonSize: [32, 32],\n\t\ticonAnchor: [16, 32],\n\t});\n\n\t// Add marker (no popup - removed per user request)\n\twindow.L.marker([dsgMap.config.lat, dsgMap.config.lng], {\n\t\ticon: customIcon,\n\t}).addTo(dsgMap.mapInstance);\n}\n","/**\n * Script and Stylesheet Loading Utilities\n *\n * Utilities for dynamically loading external scripts and stylesheets.\n */\n\n/**\n * Load external script dynamically.\n *\n * @param {string} url - Script URL.\n * @param {string} id  - Unique script ID.\n * @return {Promise} Resolves when script loads.\n */\nexport function loadScript(url, id) {\n\treturn new Promise((resolve, reject) => {\n\t\tif (document.getElementById(id)) {\n\t\t\tresolve();\n\t\t\treturn;\n\t\t}\n\n\t\tconst script = document.createElement('script');\n\t\tscript.id = id;\n\t\tscript.src = url;\n\t\tscript.async = true;\n\t\tscript.onload = () => resolve();\n\t\tscript.onerror = () => reject(new Error(`Failed to load: ${url}`));\n\t\tdocument.head.appendChild(script);\n\t});\n}\n\n/**\n * Load external stylesheet dynamically.\n *\n * @param {string} url - Stylesheet URL.\n * @param {string} id  - Unique stylesheet ID.\n * @return {Promise} Resolves when stylesheet loads.\n */\nexport function loadStylesheet(url, id) {\n\treturn new Promise((resolve, reject) => {\n\t\tif (document.getElementById(id)) {\n\t\t\tresolve();\n\t\t\treturn;\n\t\t}\n\n\t\tconst link = document.createElement('link');\n\t\tlink.id = id;\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = url;\n\t\tlink.onload = () => resolve();\n\t\tlink.onerror = () => reject(new Error(`Failed to load: ${url}`));\n\t\tdocument.head.appendChild(link);\n\t});\n}\n\n/**\n * Load Leaflet library (CSS + JS).\n *\n * @return {Promise} Resolves when Leaflet is loaded.\n */\nexport async function loadLeaflet() {\n\tconst version = '1.9.4';\n\tconst baseUrl = `https://unpkg.com/leaflet@${version}`;\n\n\tawait loadStylesheet(`${baseUrl}/dist/leaflet.css`, 'leaflet-css');\n\tawait loadScript(`${baseUrl}/dist/leaflet.js`, 'leaflet-js');\n\n\tif (typeof window.L === 'undefined') {\n\t\tthrow new Error('Leaflet failed to initialize');\n\t}\n}\n\n/**\n * Load Google Maps API using the modern async loading pattern.\n * Uses Google's recommended dynamic library import.\n *\n * @param {string} apiKey - Google Maps API key.\n * @return {Promise} Resolves when Google Maps bootstrap is loaded.\n */\nexport async function loadGoogleMaps(apiKey) {\n\tif (!apiKey) {\n\t\tthrow new Error('Google Maps API key is required');\n\t}\n\n\t// Check if already initialized\n\tif (window.google?.maps?.importLibrary) {\n\t\treturn;\n\t}\n\n\t// Initialize Google Maps bootstrap loader (inline bootstrap pattern)\n\t// This follows Google's recommended async loading: https://goo.gle/js-api-loading\n\treturn new Promise((resolve, reject) => {\n\t\ttry {\n\t\t\t// Google Maps inline bootstrap loader\n\t\t\t((g) => {\n\t\t\t\tlet h, a, k;\n\t\t\t\tconst p = 'The Google Maps JavaScript API';\n\t\t\t\tconst c = 'google';\n\t\t\t\tconst l = 'importLibrary';\n\t\t\t\tconst q = '__ib__';\n\t\t\t\tconst m = document;\n\t\t\t\tconst b = window;\n\n\t\t\t\tb[c] = b[c] || {};\n\t\t\t\tconst d = b[c].maps || (b[c].maps = {});\n\t\t\t\tconst r = new Set();\n\t\t\t\tconst e = new URLSearchParams();\n\n\t\t\t\tconst u = () =>\n\t\t\t\t\th ||\n\t\t\t\t\t(h = new Promise(async (f, n) => {\n\t\t\t\t\t\tawait (a = m.createElement('script'));\n\t\t\t\t\t\te.set('libraries', [...r] + '');\n\t\t\t\t\t\tfor (k in g) {\n\t\t\t\t\t\t\te.set(\n\t\t\t\t\t\t\t\tk.replace(\n\t\t\t\t\t\t\t\t\t/[A-Z]/g,\n\t\t\t\t\t\t\t\t\t(t) => '_' + t[0].toLowerCase()\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tg[k]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.set('callback', c + '.maps.' + q);\n\t\t\t\t\t\ta.src = `https://maps.googleapis.com/maps/api/js?` + e;\n\t\t\t\t\t\td[q] = f;\n\t\t\t\t\t\ta.onerror = () =>\n\t\t\t\t\t\t\t(h = n(Error(p + ' could not load.')));\n\t\t\t\t\t\ta.nonce = m.querySelector('script[nonce]')?.nonce || '';\n\t\t\t\t\t\tm.head.append(a);\n\t\t\t\t\t}));\n\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\td[l]\n\t\t\t\t\t? // eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn(p + ' only loads once. Ignoring:', g)\n\t\t\t\t\t: (d[l] = (f, ...n) =>\n\t\t\t\t\t\t\tr.add(f) && u().then(() => d[l](f, ...n)));\n\t\t\t})({\n\t\t\t\tkey: apiKey,\n\t\t\t\tv: 'weekly',\n\t\t\t});\n\n\t\t\t// Resolve immediately - the actual library loads on-demand via importLibrary\n\t\t\tresolve();\n\t\t} catch (error) {\n\t\t\treject(\n\t\t\t\tnew Error('Failed to initialize Google Maps: ' + error.message)\n\t\t\t);\n\t\t}\n\t});\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * Map Block - Frontend JavaScript\n *\n * Handles map initialization, privacy mode, and interactive functionality.\n */\n\nimport DSGMap from './handlers/DSGMap';\n\n/**\n * Initialize all map blocks.\n */\nfunction initMaps() {\n\tconst mapBlocks = document.querySelectorAll('.dsgo-map');\n\n\tmapBlocks.forEach((element) => {\n\t\t// Prevent duplicate initialization\n\t\tif (element.hasAttribute('data-dsgo-initialized')) {\n\t\t\treturn;\n\t\t}\n\t\telement.setAttribute('data-dsgo-initialized', 'true');\n\n\t\tnew DSGMap(element);\n\t});\n}\n\n// Run on DOM ready\nif (document.readyState === 'loading') {\n\tdocument.addEventListener('DOMContentLoaded', initMaps);\n} else {\n\tinitMaps();\n}\n\n// Expose to window for external access\nwindow.DSGMap = DSGMap;\n"],"names":["initOpenStreetMap","initGoogleMap","DSGMap","constructor","element","config","parseConfig","mapInstance","loadMapBound","loadMap","bind","privacyMode","setupPrivacyMode","dataset","lat","parseFloat","dsgoLat","lng","dsgoLng","zoom","parseInt","dsgoZoom","provider","dsgoProvider","Number","isFinite","Math","max","min","isInteger","address","dsgoAddress","markerIcon","dsgoMarkerIcon","markerColor","dsgoMarkerColor","markerPopup","dsgoMarkerPopup","grayscale","dsgoGrayscale","dsgoPrivacyMode","apiKey","dsgoApiKey","mapStyle","dsgoMapStyle","button","querySelector","addEventListener","overlay","style","display","container","setAttribute","focus","error","console","showError","message","errorDiv","document","createElement","className","textContent","cssText","appendChild","destroy","removeEventListener","remove","window","google","maps","loadGoogleMaps","GOOGLE_MAP_STYLES","silver","elementType","stylers","color","visibility","featureType","dark","dsgMap","Map","importLibrary","AdvancedMarkerElement","PinElement","mapOptions","center","mapId","random","toString","substr","styles","pinElement","background","borderColor","glyphColor","scale","map","position","content","loadLeaflet","L","tileLayer","attribution","maxZoom","addTo","iconContainer","customIcon","divIcon","html","outerHTML","iconSize","iconAnchor","marker","icon","loadScript","url","id","Promise","resolve","reject","getElementById","script","src","async","onload","onerror","Error","head","loadStylesheet","link","rel","href","version","baseUrl","g","h","a","k","p","c","l","q","m","b","d","r","Set","e","URLSearchParams","u","f","n","set","replace","t","toLowerCase","nonce","append","warn","add","then","key","v","initMaps","mapBlocks","querySelectorAll","forEach","hasAttribute","readyState"],"sourceRoot":""}