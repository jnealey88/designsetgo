(()=>{var e={4652:()=>{},6942:(e,s)=>{var o;!function(){"use strict";var t={}.hasOwnProperty;function a(){for(var e="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(e=n(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var o in e)t.call(e,o)&&e[o]&&(s=n(s,o));return s}function n(e,s){return s?e?e+" "+s:e+s:e}e.exports?(a.default=a,e.exports=a):void 0===(o=function(){return a}.apply(s,[]))||(e.exports=o)}()}},s={};function o(t){var a=s[t];if(void 0!==a)return a.exports;var r=s[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return o.d(s,{a:s}),s},o.d=(e,s)=>{for(var t in s)o.o(s,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},o.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";const e=window.wp.blocks,s=window.wp.i18n,t=window.wp.blockEditor;var a=o(6942),r=o.n(a);const n=window.wp.components,i=window.wp.element,d=window.wp.compose,l=window.ReactJSXRuntime;function g({attributes:e,setAttributes:o}){const{dsgoProvider:t,dsgoLatitude:a,dsgoLongitude:r,dsgoZoom:g,dsgoAddress:c,dsgoMarkerIcon:p,dsgoHeight:m,dsgoAspectRatio:_,dsgoMapStyle:u,dsgoPrivacyMode:x,dsgoPrivacyNotice:h}=e,[v,y]=(0,i.useState)(!1),[f,M]=(0,i.useState)(""),w=(0,i.useCallback)(async()=>{if(c&&""!==c.trim()){y(!0),M("");try{const e=await async function(e){if(!e||""===e.trim())return null;try{const s=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.trim())}&limit=1`,o=await fetch(s,{headers:{"User-Agent":"DesignSetGo WordPress Plugin"}});if(!o.ok)throw new Error("Geocoding request failed");const t=await o.json();if(t&&t.length>0){const e=t[0];return{lat:parseFloat(e.lat),lng:parseFloat(e.lon),display_name:e.display_name}}return null}catch(e){return console.error("Geocoding error:",e),null}}(c);e?o({dsgoLatitude:e.lat,dsgoLongitude:e.lng,dsgoAddress:e.display_name}):M((0,s.__)("Address not found. Please try a different search.","designsetgo"))}catch(e){M((0,s.__)("Failed to search address. Please try again.","designsetgo"))}finally{y(!1)}}else M((0,s.__)("Please enter an address to search.","designsetgo"))},[c,o]);return(0,i.useMemo)(()=>(0,d.debounce)(w,1e3),[w]),(0,l.jsxs)(n.PanelBody,{title:(0,s.__)("Map Settings","designsetgo"),initialOpen:!0,children:[(0,l.jsx)(n.SelectControl,{label:(0,s.__)("Map Provider","designsetgo"),value:t,options:[{label:(0,s.__)("OpenStreetMap (No API key required)","designsetgo"),value:"openstreetmap"},{label:(0,s.__)("Google Maps (Requires API key)","designsetgo"),value:"googlemaps"}],onChange:e=>o({dsgoProvider:e}),help:"openstreetmap"===t?(0,s.__)("Privacy-friendly and free to use.","designsetgo"):(0,s.__)("Requires a Google Maps API key.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"googlemaps"===t&&(0,l.jsx)(l.Fragment,{children:window.dsgoIntegrations?.googleMapsApiKey?(0,l.jsxs)(n.Notice,{status:"success",isDismissible:!1,style:{marginTop:"12px"},children:[(0,s.__)("‚úì Google Maps API key configured in ","designsetgo"),(0,l.jsx)("a",{href:"/wp-admin/admin.php?page=designsetgo-settings",target:"_blank",rel:"noopener noreferrer",children:(0,s.__)("Settings","designsetgo")}),"."]}):(0,l.jsxs)(n.Notice,{status:"warning",isDismissible:!1,style:{marginTop:"12px"},children:[(0,l.jsx)("strong",{children:(0,s.__)("‚ö† No API key configured.","designsetgo")})," ",(0,s.__)("Add a Google Maps API key in ","designsetgo"),(0,l.jsx)("a",{href:"/wp-admin/admin.php?page=designsetgo-settings",target:"_blank",rel:"noopener noreferrer",children:(0,s.__)("Settings","designsetgo")})," ",(0,s.__)("to use Google Maps.","designsetgo"),(0,l.jsx)("br",{}),(0,l.jsxs)("small",{children:[(0,l.jsx)("strong",{children:(0,s.__)("Security:","designsetgo")})," ",(0,s.__)("Configure HTTP referrer restrictions in Google Cloud Console.","designsetgo")]})]})}),(0,l.jsxs)("div",{style:{marginTop:"24px"},children:[(0,l.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Location","designsetgo")}),(0,l.jsx)(n.TextControl,{label:(0,s.__)("Search Address","designsetgo"),value:c,onChange:e=>{o({dsgoAddress:e}),M("")},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),w())},placeholder:(0,s.__)("Enter an address or location","designsetgo"),help:(0,s.__)("Search for a location to automatically set coordinates.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,l.jsx)(n.Button,{variant:"secondary",onClick:w,isBusy:v,disabled:!c||v,style:{marginTop:"8px"},children:v?(0,s.__)("Searching...","designsetgo"):(0,s.__)("Search Address","designsetgo")}),f&&(0,l.jsx)(n.Notice,{status:"error",isDismissible:!1,style:{marginTop:"12px"},children:f}),(0,l.jsxs)("div",{style:{marginTop:"16px"},children:[(0,l.jsx)(n.TextControl,{label:(0,s.__)("Latitude","designsetgo"),type:"number",value:a,onChange:e=>{const s=parseFloat(e),t=Number.isFinite(s)?Math.max(-90,Math.min(90,s)):0;o({dsgoLatitude:t})},step:"0.000001",min:"-90",max:"90",help:(0,s.__)("Manual coordinate entry (between -90 and 90).","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,l.jsx)(n.TextControl,{label:(0,s.__)("Longitude","designsetgo"),type:"number",value:r,onChange:e=>{const s=parseFloat(e),t=Number.isFinite(s)?Math.max(-180,Math.min(180,s)):0;o({dsgoLongitude:t})},step:"0.000001",min:"-180",max:"180",help:(0,s.__)("Manual coordinate entry (between -180 and 180).","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,l.jsx)(n.RangeControl,{label:(0,s.__)("Zoom Level","designsetgo"),value:g,onChange:e=>o({dsgoZoom:e}),min:1,max:20,step:1,help:(0,s.__)("1 = world view, 20 = street level.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,l.jsxs)("div",{style:{marginTop:"24px"},children:[(0,l.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Marker","designsetgo")}),(0,l.jsx)(n.TextControl,{label:(0,s.__)("Marker Icon","designsetgo"),value:p,onChange:e=>o({dsgoMarkerIcon:e||"üìç"}),help:(0,s.__)("Enter an emoji or icon character.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,l.jsxs)("div",{style:{marginTop:"24px"},children:[(0,l.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Appearance","designsetgo")}),(0,l.jsx)(n.SelectControl,{label:(0,s.__)("Aspect Ratio","designsetgo"),value:_,options:[{label:(0,s.__)("16:9 (Widescreen)","designsetgo"),value:"16:9"},{label:(0,s.__)("4:3 (Standard)","designsetgo"),value:"4:3"},{label:(0,s.__)("1:1 (Square)","designsetgo"),value:"1:1"},{label:(0,s.__)("Custom Height","designsetgo"),value:"custom"}],onChange:e=>o({dsgoAspectRatio:e}),help:"custom"===_?(0,s.__)("Set a custom height below.","designsetgo"):(0,s.__)("Maintains aspect ratio across screen sizes.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"custom"===_&&(0,l.jsx)(n.__experimentalUnitControl,{label:(0,s.__)("Map Height","designsetgo"),value:m,onChange:e=>o({dsgoHeight:e||"400px"}),units:[{value:"px",label:"px"},{value:"%",label:"%"},{value:"vh",label:"vh"}],help:(0,s.__)("Set a custom height for the map.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"googlemaps"===t&&(0,l.jsx)(n.SelectControl,{label:(0,s.__)("Map Style","designsetgo"),value:u,options:[{label:(0,s.__)("Standard","designsetgo"),value:"standard"},{label:(0,s.__)("Silver (Minimalist)","designsetgo"),value:"silver"},{label:(0,s.__)("Dark Mode","designsetgo"),value:"dark"}],onChange:e=>o({dsgoMapStyle:e}),help:(0,s.__)("Choose a visual style for Google Maps.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,l.jsxs)("div",{style:{marginTop:"24px"},children:[(0,l.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Privacy","designsetgo")}),(0,l.jsx)(n.ToggleControl,{label:(0,s.__)("Enable Privacy Mode","designsetgo"),checked:x,onChange:e=>o({dsgoPrivacyMode:e}),help:x?(0,s.__)("Map will not load until user clicks to consent.","designsetgo"):(0,s.__)("Map will load automatically when page loads.","designsetgo"),__nextHasNoMarginBottom:!0}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.TextareaControl,{label:(0,s.__)("Privacy Notice","designsetgo"),value:h,onChange:e=>o({dsgoPrivacyNotice:e}),rows:4,help:(0,s.__)("Message shown to users before loading the map.","designsetgo"),__nextHasNoMarginBottom:!0}),(0,l.jsx)("p",{style:{marginTop:"12px",fontSize:"12px",color:"#757575"},children:(0,s.__)("Privacy mode is GDPR-compliant. External map services will only load after user consent.","designsetgo")})]})]})]})}const c=[{attributes:{dsgoProvider:{type:"string",default:"openstreetmap"},dsgoLatitude:{type:"number",default:40.7128},dsgoLongitude:{type:"number",default:-74.006},dsgoZoom:{type:"number",default:13},dsgoAddress:{type:"string",default:""},dsgoMarkerIcon:{type:"string",default:"üìç"},dsgoMarkerColor:{type:"string",default:"#e74c3c"},dsgoMarkerPopup:{type:"string",default:""},dsgoHeight:{type:"string",default:"400px"},dsgoAspectRatio:{type:"string",default:"custom"},dsgoGrayscale:{type:"boolean",default:!1},dsgoPrivacyMode:{type:"boolean",default:!1},dsgoPrivacyNotice:{type:"string",default:"This map will load content from external services. Click to load and view the map."},dsgoMapStyle:{type:"string",default:"standard"}},save({attributes:e}){const{dsgoProvider:o,dsgoLatitude:a,dsgoLongitude:n,dsgoZoom:i,dsgoAddress:d,dsgoMarkerIcon:g,dsgoMarkerColor:c,dsgoMarkerPopup:p,dsgoHeight:m,dsgoAspectRatio:_,dsgoGrayscale:u,dsgoPrivacyMode:x,dsgoPrivacyNotice:h,dsgoMapStyle:v}=e,y=Math.max(-90,Math.min(90,a||0)),f=Math.max(-180,Math.min(180,n||0)),M=Math.max(1,Math.min(20,i||13)),w=r()("dsgo-map",{"dsgo-map--grayscale":u,"dsgo-map--privacy-mode":x,[`dsgo-map--aspect-${_.replace(":","-")}`]:"custom"!==_}),j={};"custom"===_&&(j.height=m);const b={"data-dsgo-provider":o,"data-dsgo-lat":y,"data-dsgo-lng":f,"data-dsgo-zoom":M,"data-dsgo-address":d||"","data-dsgo-marker-icon":g||"üìç","data-dsgo-marker-color":c||"#e74c3c","data-dsgo-marker-popup":p||"","data-dsgo-grayscale":u,"data-dsgo-privacy-mode":x,"data-dsgo-map-style":v||"standard"},k=t.useBlockProps.save({className:w,style:j,...b});return x?(0,l.jsx)("div",{...k,children:(0,l.jsxs)("div",{className:"dsgo-map__privacy-overlay",children:[(0,l.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,l.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,l.jsx)("p",{className:"dsgo-map__privacy-text",children:h||(0,s.__)("Click to load map","designsetgo")}),(0,l.jsx)("button",{className:"dsgo-map__load-button",type:"button","aria-label":(0,s.__)("Load map. This will connect to external map services.","designsetgo"),children:(0,s.__)("Load Map","designsetgo")})]})}):(0,l.jsx)("div",{...k,children:(0,l.jsx)("div",{className:"dsgo-map__container",role:"region","aria-label":d?(0,s.sprintf)((0,s.__)("Map showing %s","designsetgo"),d):(0,s.__)("Interactive map","designsetgo")})})},migrate(e){const{dsgoMarkerPopup:s,dsgoGrayscale:o,...t}=e;return t}}],p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"designsetgo/map","version":"1.0.0","title":"Map","category":"widgets","description":"Display an interactive map using OpenStreetMap or Google Maps.","keywords":["map","location","address","openstreetmap","google maps","directions"],"textdomain":"designsetgo","attributes":{"dsgoProvider":{"type":"string","default":"openstreetmap","enum":["openstreetmap","googlemaps"]},"dsgoLatitude":{"type":"number","default":40.7128},"dsgoLongitude":{"type":"number","default":-74.006},"dsgoZoom":{"type":"number","default":13},"dsgoAddress":{"type":"string","default":""},"dsgoMarkerIcon":{"type":"string","default":"üìç"},"dsgoMarkerColor":{"type":"string","default":"#e74c3c"},"dsgoHeight":{"type":"string","default":"400px"},"dsgoAspectRatio":{"type":"string","default":"custom","enum":["16:9","4:3","1:1","custom"]},"dsgoPrivacyMode":{"type":"boolean","default":false},"dsgoPrivacyNotice":{"type":"string","default":"This map will load content from external services. Click to load and view the map."},"dsgoMapStyle":{"type":"string","default":"standard"}},"supports":{"anchor":true,"align":["wide","full"],"html":false,"spacing":{"margin":true,"padding":true,"blockGap":false,"__experimentalDefaultControls":{"padding":false,"margin":false}},"color":{"background":true,"text":false,"link":false,"__experimentalDefaultControls":{"background":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"radius":true}}},"example":{"attributes":{"dsgoLatitude":40.7128,"dsgoLongitude":-74.006,"dsgoZoom":13,"dsgoAddress":"New York, NY"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./index.css","viewScript":"file:./view.js"}');o(4652),(0,e.registerBlockType)(p.name,{...p,icon:{src:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),foreground:"#2563eb"},deprecated:c,edit:function({attributes:e,setAttributes:o,clientId:a}){const{dsgoProvider:n,dsgoLatitude:i,dsgoLongitude:d,dsgoZoom:c,dsgoMarkerColor:p,dsgoAspectRatio:m,dsgoHeight:_,dsgoPrivacyMode:u,dsgoPrivacyNotice:x}=e,h=(0,t.__experimentalUseMultipleOriginColorsAndGradients)(),v=r()("dsgo-map",{"dsgo-map--privacy-mode":u,[`dsgo-map--aspect-${m.replace(":","-")}`]:"custom"!==m}),y={};"custom"!==m||(y.height=_);const f=(0,t.useBlockProps)({className:v,style:y});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.InspectorControls,{children:(0,l.jsx)(g,{attributes:e,setAttributes:o})}),(0,l.jsx)(t.InspectorControls,{group:"color",children:(0,l.jsx)(t.__experimentalColorGradientSettingsDropdown,{panelId:a,title:(0,s.__)("Marker Color","designsetgo"),settings:[{label:(0,s.__)("Marker Color","designsetgo"),colorValue:p,onColorChange:e=>o({dsgoMarkerColor:e||"#e74c3c"}),clearable:!0}],...h})}),(0,l.jsx)("div",{...f,children:(0,l.jsx)("div",{className:"dsgo-map__editor-preview",children:u?(0,l.jsx)("div",{className:"dsgo-map__privacy-overlay",children:(0,l.jsxs)("div",{className:"dsgo-map__privacy-content",children:[(0,l.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,l.jsx)("p",{className:"dsgo-map__privacy-text",children:x||(0,s.__)("Click to load map","designsetgo")}),(0,l.jsx)("button",{className:"dsgo-map__load-button",type:"button",onClick:e=>e.preventDefault(),children:(0,s.__)("Load Map","designsetgo")}),(0,l.jsx)("p",{className:"dsgo-map__preview-note",children:(0,s.__)("Preview: Privacy mode is enabled","designsetgo")})]})}):(0,l.jsxs)("div",{className:"dsgo-map__preview-placeholder",children:[(0,l.jsxs)("div",{className:"dsgo-map__preview-info",children:[(0,l.jsxs)("svg",{className:"dsgo-map__preview-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,l.jsxs)("div",{className:"dsgo-map__preview-details",children:[(0,l.jsx)("strong",{children:(0,s.__)("Map Preview","designsetgo")}),(0,l.jsx)("div",{className:"dsgo-map__preview-coords",children:(0,l.jsxs)("code",{children:[i.toFixed(6),", ",d.toFixed(6)]})}),(0,l.jsxs)("div",{className:"dsgo-map__preview-meta",children:["openstreetmap"===n?(0,s.__)("OpenStreetMap","designsetgo"):(0,s.__)("Google Maps","designsetgo")," ","‚Ä¢ ",(0,s.__)("Zoom:","designsetgo")," ",c]})]})]}),(0,l.jsx)("div",{className:"dsgo-map__preview-note",children:(0,s.__)("Interactive map will display on the frontend","designsetgo")})]})})})]})},save:function({attributes:e}){const{dsgoProvider:o,dsgoLatitude:a,dsgoLongitude:n,dsgoZoom:i,dsgoAddress:d,dsgoMarkerIcon:g,dsgoMarkerColor:c,dsgoHeight:p,dsgoAspectRatio:m,dsgoPrivacyMode:_,dsgoPrivacyNotice:u,dsgoMapStyle:x}=e,h=r()("dsgo-map",{"dsgo-map--privacy-mode":_,[`dsgo-map--aspect-${m.replace(":","-")}`]:"custom"!==m}),v={};"custom"===m&&(v.height=p);const y={"data-dsgo-provider":o,"data-dsgo-lat":Math.max(-90,Math.min(90,a||0)),"data-dsgo-lng":Math.max(-180,Math.min(180,n||0)),"data-dsgo-zoom":Math.max(1,Math.min(20,i||13)),"data-dsgo-address":d||"","data-dsgo-marker-icon":g||"üìç","data-dsgo-marker-color":c||"#e74c3c","data-dsgo-privacy-mode":_?"true":"false","data-dsgo-map-style":x},f=t.useBlockProps.save({className:h,style:v,...y});return(0,l.jsx)("div",{...f,children:_?(0,l.jsx)("div",{className:"dsgo-map__privacy-overlay",children:(0,l.jsxs)("div",{className:"dsgo-map__privacy-content",children:[(0,l.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,l.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,l.jsx)("p",{className:"dsgo-map__privacy-text",children:u||(0,s.__)("Click to load map","designsetgo")}),(0,l.jsx)("button",{className:"dsgo-map__load-button",type:"button","aria-label":(0,s.__)("Load map. This will connect to external map services.","designsetgo"),children:(0,s.__)("Load Map","designsetgo")})]})}):(0,l.jsx)("div",{className:"dsgo-map__container",role:"region","aria-label":d?(0,s.sprintf)((0,s.__)("Map showing %s","designsetgo"),d):(0,s.__)("Interactive map","designsetgo")})})}})})()})();