(()=>{var e={4652:()=>{},6942:(e,s)=>{var t;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e="",s=0;s<arguments.length;s++){var t=arguments[s];t&&(e=n(e,r(t)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var t in e)o.call(e,t)&&e[t]&&(s=n(s,t));return s}function n(e,s){return s?e?e+" "+s:e+s:e}e.exports?(a.default=a,e.exports=a):void 0===(t=function(){return a}.apply(s,[]))||(e.exports=t)}()}},s={};function t(o){var a=s[o];if(void 0!==a)return a.exports;var r=s[o]={exports:{}};return e[o](r,r.exports,t),r.exports}t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";const e=window.wp.blocks,s=window.wp.i18n,o=window.wp.blockEditor;var a=t(6942),r=t.n(a);const n=window.wp.components,i=window.wp.element,d=window.ReactJSXRuntime;function l({attributes:e,setAttributes:t}){const{dsgoProvider:o,dsgoLatitude:a,dsgoLongitude:r,dsgoZoom:l,dsgoAddress:g,dsgoMarkerIcon:c,dsgoHeight:p,dsgoAspectRatio:_,dsgoMapStyle:m,dsgoPrivacyMode:u,dsgoPrivacyNotice:x}=e,[h,v]=(0,i.useState)(!1),[y,f]=(0,i.useState)(""),M=(0,i.useCallback)(async()=>{if(g&&""!==g.trim()){v(!0),f("");try{const e=await async function(e){if(!e||""===e.trim())return null;try{const s=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.trim())}&limit=1`,t=await fetch(s,{headers:{"User-Agent":"DesignSetGo WordPress Plugin"}});if(!t.ok)throw new Error("Geocoding request failed");const o=await t.json();if(o&&o.length>0){const e=o[0];return{lat:parseFloat(e.lat),lng:parseFloat(e.lon),display_name:e.display_name}}return null}catch(e){return console.error("Geocoding error:",e),null}}(g);e?t({dsgoLatitude:e.lat,dsgoLongitude:e.lng,dsgoAddress:e.display_name}):f((0,s.__)("Address not found. Please try a different search.","designsetgo"))}catch(e){f((0,s.__)("Failed to search address. Please try again.","designsetgo"))}finally{v(!1)}}else f((0,s.__)("Please enter an address to search.","designsetgo"))},[g,t]);return(0,d.jsxs)(n.PanelBody,{title:(0,s.__)("Map Settings","designsetgo"),initialOpen:!0,children:[(0,d.jsx)(n.SelectControl,{label:(0,s.__)("Map Provider","designsetgo"),value:o,options:[{label:(0,s.__)("OpenStreetMap (No API key required)","designsetgo"),value:"openstreetmap"},{label:(0,s.__)("Google Maps (Requires API key)","designsetgo"),value:"googlemaps"}],onChange:e=>t({dsgoProvider:e}),help:"openstreetmap"===o?(0,s.__)("Privacy-friendly and free to use.","designsetgo"):(0,s.__)("Requires a Google Maps API key.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"googlemaps"===o&&(0,d.jsx)(d.Fragment,{children:window.dsgoIntegrations?.googleMapsApiKey?(0,d.jsxs)(n.Notice,{status:"success",isDismissible:!1,style:{marginTop:"12px"},children:[(0,s.__)("‚úì Google Maps API key configured in","designsetgo"),(0,d.jsx)("a",{href:"/wp-admin/admin.php?page=designsetgo-settings",target:"_blank",rel:"noopener noreferrer",children:(0,s.__)("Settings","designsetgo")}),"."]}):(0,d.jsxs)(n.Notice,{status:"warning",isDismissible:!1,style:{marginTop:"12px"},children:[(0,d.jsx)("strong",{children:(0,s.__)("‚ö† No API key configured.","designsetgo")})," ",(0,s.__)("Add a Google Maps API key in","designsetgo"),(0,d.jsx)("a",{href:"/wp-admin/admin.php?page=designsetgo-settings",target:"_blank",rel:"noopener noreferrer",children:(0,s.__)("Settings","designsetgo")})," ",(0,s.__)("to use Google Maps.","designsetgo"),(0,d.jsx)("br",{}),(0,d.jsxs)("small",{children:[(0,d.jsx)("strong",{children:(0,s.__)("Security:","designsetgo")})," ",(0,s.__)("Configure HTTP referrer restrictions in Google Cloud Console.","designsetgo")]})]})}),(0,d.jsxs)("div",{style:{marginTop:"24px"},children:[(0,d.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Location","designsetgo")}),(0,d.jsx)(n.TextControl,{label:(0,s.__)("Search Address","designsetgo"),value:g,onChange:e=>{t({dsgoAddress:e}),f("")},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),M())},placeholder:(0,s.__)("Enter an address or location","designsetgo"),help:(0,s.__)("Search for a location to automatically set coordinates.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,d.jsx)(n.Button,{variant:"secondary",onClick:M,isBusy:h,disabled:!g||h,style:{marginTop:"8px"},children:h?(0,s.__)("Searching‚Ä¶","designsetgo"):(0,s.__)("Search Address","designsetgo")}),y&&(0,d.jsx)(n.Notice,{status:"error",isDismissible:!1,style:{marginTop:"12px"},children:y}),(0,d.jsxs)("div",{style:{marginTop:"16px"},children:[(0,d.jsx)(n.TextControl,{label:(0,s.__)("Latitude","designsetgo"),type:"number",value:a,onChange:e=>{const s=parseFloat(e),o=Number.isFinite(s)?Math.max(-90,Math.min(90,s)):0;t({dsgoLatitude:o})},step:"0.000001",min:"-90",max:"90",help:(0,s.__)("Manual coordinate entry (between -90 and 90).","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,d.jsx)(n.TextControl,{label:(0,s.__)("Longitude","designsetgo"),type:"number",value:r,onChange:e=>{const s=parseFloat(e),o=Number.isFinite(s)?Math.max(-180,Math.min(180,s)):0;t({dsgoLongitude:o})},step:"0.000001",min:"-180",max:"180",help:(0,s.__)("Manual coordinate entry (between -180 and 180).","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,d.jsx)(n.RangeControl,{label:(0,s.__)("Zoom Level","designsetgo"),value:l,onChange:e=>t({dsgoZoom:e}),min:1,max:20,step:1,help:(0,s.__)("1 = world view, 20 = street level.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,d.jsxs)("div",{style:{marginTop:"24px"},children:[(0,d.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Marker","designsetgo")}),(0,d.jsx)(n.TextControl,{label:(0,s.__)("Marker Icon","designsetgo"),value:c,onChange:e=>t({dsgoMarkerIcon:e||"üìç"}),help:(0,s.__)("Enter an emoji or icon character.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,d.jsxs)("div",{style:{marginTop:"24px"},children:[(0,d.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Appearance","designsetgo")}),(0,d.jsx)(n.SelectControl,{label:(0,s.__)("Aspect Ratio","designsetgo"),value:_,options:[{label:(0,s.__)("16:9 (Widescreen)","designsetgo"),value:"16:9"},{label:(0,s.__)("4:3 (Standard)","designsetgo"),value:"4:3"},{label:(0,s.__)("1:1 (Square)","designsetgo"),value:"1:1"},{label:(0,s.__)("Custom Height","designsetgo"),value:"custom"}],onChange:e=>t({dsgoAspectRatio:e}),help:"custom"===_?(0,s.__)("Set a custom height below.","designsetgo"):(0,s.__)("Maintains aspect ratio across screen sizes.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"custom"===_&&(0,d.jsx)(n.__experimentalUnitControl,{label:(0,s.__)("Map Height","designsetgo"),value:p,onChange:e=>t({dsgoHeight:e||"400px"}),units:[{value:"px",label:"px"},{value:"%",label:"%"},{value:"vh",label:"vh"}],help:(0,s.__)("Set a custom height for the map.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"googlemaps"===o&&(0,d.jsx)(n.SelectControl,{label:(0,s.__)("Map Style","designsetgo"),value:m,options:[{label:(0,s.__)("Standard","designsetgo"),value:"standard"},{label:(0,s.__)("Silver (Minimalist)","designsetgo"),value:"silver"},{label:(0,s.__)("Dark Mode","designsetgo"),value:"dark"}],onChange:e=>t({dsgoMapStyle:e}),help:(0,s.__)("Choose a visual style for Google Maps.","designsetgo"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,d.jsxs)("div",{style:{marginTop:"24px"},children:[(0,d.jsx)("h3",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:(0,s.__)("Privacy","designsetgo")}),(0,d.jsx)(n.ToggleControl,{label:(0,s.__)("Enable Privacy Mode","designsetgo"),checked:u,onChange:e=>t({dsgoPrivacyMode:e}),help:u?(0,s.__)("Map will not load until user clicks to consent.","designsetgo"):(0,s.__)("Map will load automatically when page loads.","designsetgo"),__nextHasNoMarginBottom:!0}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.TextareaControl,{label:(0,s.__)("Privacy Notice","designsetgo"),value:x,onChange:e=>t({dsgoPrivacyNotice:e}),rows:4,help:(0,s.__)("Message shown to users before loading the map.","designsetgo"),__nextHasNoMarginBottom:!0}),(0,d.jsx)("p",{style:{marginTop:"12px",fontSize:"12px",color:"#757575"},children:(0,s.__)("Privacy mode is GDPR-compliant. External map services will only load after user consent.","designsetgo")})]})]})]})}const g=[{attributes:{dsgoProvider:{type:"string",default:"openstreetmap"},dsgoLatitude:{type:"number",default:40.7128},dsgoLongitude:{type:"number",default:-74.006},dsgoZoom:{type:"number",default:13},dsgoAddress:{type:"string",default:""},dsgoMarkerIcon:{type:"string",default:"üìç"},dsgoMarkerColor:{type:"string",default:"#e74c3c"},dsgoMarkerPopup:{type:"string",default:""},dsgoHeight:{type:"string",default:"400px"},dsgoAspectRatio:{type:"string",default:"custom"},dsgoGrayscale:{type:"boolean",default:!1},dsgoPrivacyMode:{type:"boolean",default:!1},dsgoPrivacyNotice:{type:"string",default:"This map will load content from external services. Click to load and view the map."},dsgoMapStyle:{type:"string",default:"standard"}},save({attributes:e}){const{dsgoProvider:t,dsgoLatitude:a,dsgoLongitude:n,dsgoZoom:i,dsgoAddress:l,dsgoMarkerIcon:g,dsgoMarkerColor:c,dsgoMarkerPopup:p,dsgoHeight:_,dsgoAspectRatio:m,dsgoGrayscale:u,dsgoPrivacyMode:x,dsgoPrivacyNotice:h,dsgoMapStyle:v}=e,y=Math.max(-90,Math.min(90,a||0)),f=Math.max(-180,Math.min(180,n||0)),M=Math.max(1,Math.min(20,i||13)),j=r()("dsgo-map",{"dsgo-map--grayscale":u,"dsgo-map--privacy-mode":x,[`dsgo-map--aspect-${m.replace(":","-")}`]:"custom"!==m}),w={};"custom"===m&&(w.height=_);const b={"data-dsgo-provider":t,"data-dsgo-lat":y,"data-dsgo-lng":f,"data-dsgo-zoom":M,"data-dsgo-address":l||"","data-dsgo-marker-icon":g||"üìç","data-dsgo-marker-color":c||"#e74c3c","data-dsgo-marker-popup":p||"","data-dsgo-grayscale":u,"data-dsgo-privacy-mode":x,"data-dsgo-map-style":v||"standard"},k=o.useBlockProps.save({className:j,style:w,...b}),C=l?/* translators: %s: The address being shown on the map */ /* translators: %s: The address being shown on the map */
(0,s.sprintf)((0,s.__)("Map showing %s","designsetgo"),l):(0,s.__)("Interactive map","designsetgo");return x?(0,d.jsx)("div",{...k,children:(0,d.jsxs)("div",{className:"dsgo-map__privacy-overlay",children:[(0,d.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,d.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,d.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,d.jsx)("p",{className:"dsgo-map__privacy-text",children:h||(0,s.__)("Click to load map","designsetgo")}),(0,d.jsx)("button",{className:"dsgo-map__load-button",type:"button","aria-label":(0,s.__)("Load map. This will connect to external map services.","designsetgo"),children:(0,s.__)("Load Map","designsetgo")})]})}):(0,d.jsx)("div",{...k,children:(0,d.jsx)("div",{className:"dsgo-map__container",role:"region","aria-label":C})})},migrate(e){const{dsgoMarkerPopup:s,dsgoGrayscale:t,...o}=e;return o}}],c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"designsetgo/map","version":"1.0.0","title":"Map","category":"widgets","description":"Display an interactive map using OpenStreetMap or Google Maps.","keywords":["map","location","address","openstreetmap","google maps","directions"],"textdomain":"designsetgo","attributes":{"dsgoProvider":{"type":"string","default":"openstreetmap","enum":["openstreetmap","googlemaps"]},"dsgoLatitude":{"type":"number","default":40.7128},"dsgoLongitude":{"type":"number","default":-74.006},"dsgoZoom":{"type":"number","default":13},"dsgoAddress":{"type":"string","default":""},"dsgoMarkerIcon":{"type":"string","default":"üìç"},"dsgoMarkerColor":{"type":"string","default":"#e74c3c"},"dsgoHeight":{"type":"string","default":"400px"},"dsgoAspectRatio":{"type":"string","default":"custom","enum":["16:9","4:3","1:1","custom"]},"dsgoPrivacyMode":{"type":"boolean","default":false},"dsgoPrivacyNotice":{"type":"string","default":"This map will load content from external services. Click to load and view the map."},"dsgoMapStyle":{"type":"string","default":"standard"}},"supports":{"anchor":true,"align":["wide","full"],"html":false,"spacing":{"margin":true,"padding":true,"blockGap":false,"__experimentalDefaultControls":{"padding":false,"margin":false}},"color":{"background":true,"text":false,"link":false,"__experimentalDefaultControls":{"background":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"radius":true}}},"example":{"attributes":{"dsgoLatitude":40.7128,"dsgoLongitude":-74.006,"dsgoZoom":13,"dsgoAddress":"New York, NY"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./index.css","viewScript":"file:./view.js"}');t(4652),(0,e.registerBlockType)(c.name,{...c,icon:{src:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,d.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),foreground:"#2563eb"},deprecated:g,edit:function({attributes:e,setAttributes:t,clientId:a}){const{dsgoProvider:n,dsgoLatitude:i,dsgoLongitude:g,dsgoZoom:c,dsgoMarkerColor:p,dsgoAspectRatio:_,dsgoHeight:m,dsgoPrivacyMode:u,dsgoPrivacyNotice:x}=e,h=(0,o.__experimentalUseMultipleOriginColorsAndGradients)(),v=r()("dsgo-map",{"dsgo-map--privacy-mode":u,[`dsgo-map--aspect-${_.replace(":","-")}`]:"custom"!==_}),y={};"custom"!==_||(y.height=m);const f=(0,o.useBlockProps)({className:v,style:y});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.InspectorControls,{children:(0,d.jsx)(l,{attributes:e,setAttributes:t})}),(0,d.jsx)(o.InspectorControls,{group:"color",children:(0,d.jsx)(o.__experimentalColorGradientSettingsDropdown,{panelId:a,title:(0,s.__)("Marker Color","designsetgo"),settings:[{label:(0,s.__)("Marker Color","designsetgo"),colorValue:p,onColorChange:e=>t({dsgoMarkerColor:e||"#e74c3c"}),clearable:!0}],...h})}),(0,d.jsx)("div",{...f,children:(0,d.jsx)("div",{className:"dsgo-map__editor-preview",children:u?(0,d.jsx)("div",{className:"dsgo-map__privacy-overlay",children:(0,d.jsxs)("div",{className:"dsgo-map__privacy-content",children:[(0,d.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,d.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,d.jsx)("p",{className:"dsgo-map__privacy-text",children:x||(0,s.__)("Click to load map","designsetgo")}),(0,d.jsx)("button",{className:"dsgo-map__load-button",type:"button",onClick:e=>e.preventDefault(),children:(0,s.__)("Load Map","designsetgo")}),(0,d.jsx)("p",{className:"dsgo-map__preview-note",children:(0,s.__)("Preview: Privacy mode is enabled","designsetgo")})]})}):(0,d.jsxs)("div",{className:"dsgo-map__preview-placeholder",children:[(0,d.jsxs)("div",{className:"dsgo-map__preview-info",children:[(0,d.jsxs)("svg",{className:"dsgo-map__preview-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,d.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,d.jsxs)("div",{className:"dsgo-map__preview-details",children:[(0,d.jsx)("strong",{children:(0,s.__)("Map Preview","designsetgo")}),(0,d.jsx)("div",{className:"dsgo-map__preview-coords",children:(0,d.jsxs)("code",{children:[i.toFixed(6),","," ",g.toFixed(6)]})}),(0,d.jsxs)("div",{className:"dsgo-map__preview-meta",children:["openstreetmap"===n?(0,s.__)("OpenStreetMap","designsetgo"):(0,s.__)("Google Maps","designsetgo")," ","‚Ä¢ ",(0,s.__)("Zoom:","designsetgo")," ",c]})]})]}),(0,d.jsx)("div",{className:"dsgo-map__preview-note",children:(0,s.__)("Interactive map will display on the frontend","designsetgo")})]})})})]})},save:function({attributes:e}){const{dsgoProvider:t,dsgoLatitude:a,dsgoLongitude:n,dsgoZoom:i,dsgoAddress:l,dsgoMarkerIcon:g,dsgoMarkerColor:c,dsgoHeight:p,dsgoAspectRatio:_,dsgoPrivacyMode:m,dsgoPrivacyNotice:u,dsgoMapStyle:x}=e,h=r()("dsgo-map",{"dsgo-map--privacy-mode":m,[`dsgo-map--aspect-${_.replace(":","-")}`]:"custom"!==_}),v={};"custom"===_&&(v.height=p);const y={"data-dsgo-provider":t,"data-dsgo-lat":Math.max(-90,Math.min(90,a||0)),"data-dsgo-lng":Math.max(-180,Math.min(180,n||0)),"data-dsgo-zoom":Math.max(1,Math.min(20,i||13)),"data-dsgo-address":l||"","data-dsgo-marker-icon":g||"üìç","data-dsgo-marker-color":c||"#e74c3c","data-dsgo-privacy-mode":m?"true":"false","data-dsgo-map-style":x},f=o.useBlockProps.save({className:h,style:v,...y}),M=l?/* translators: %s: The address being shown on the map */ /* translators: %s: The address being shown on the map */
(0,s.sprintf)((0,s.__)("Map showing %s","designsetgo"),l):(0,s.__)("Interactive map","designsetgo");return(0,d.jsx)("div",{...f,children:m?(0,d.jsx)("div",{className:"dsgo-map__privacy-overlay",children:(0,d.jsxs)("div",{className:"dsgo-map__privacy-content",children:[(0,d.jsxs)("svg",{className:"dsgo-map__privacy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,d.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,d.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,d.jsx)("p",{className:"dsgo-map__privacy-text",children:u||(0,s.__)("Click to load map","designsetgo")}),(0,d.jsx)("button",{className:"dsgo-map__load-button",type:"button","aria-label":(0,s.__)("Load map. This will connect to external map services.","designsetgo"),children:(0,s.__)("Load Map","designsetgo")})]})}):(0,d.jsx)("div",{className:"dsgo-map__container",role:"region","aria-label":M})})}})})()})();